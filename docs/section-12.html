<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>mlrパッケージチュートリアル - Quick Walkthrough編</title>
  <meta name="description" content="mlrパッケージチュートリアル - Quick Walkthrough編">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="mlrパッケージチュートリアル - Quick Walkthrough編" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="mlrパッケージチュートリアル - Quick Walkthrough編" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="section-11.html">

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="index.html#section"></a></li>
<li class="chapter" data-level="1" data-path="quick-start.html"><a href="quick-start.html"><i class="fa fa-check"></i><b>1</b> Quick start</a><ul>
<li class="chapter" data-level="1.1" data-path="quick-start.html"><a href="quick-start.html#section-1.1"><i class="fa fa-check"></i><b>1.1</b> タスクの定義</a></li>
<li class="chapter" data-level="1.2" data-path="quick-start.html"><a href="quick-start.html#section-1.2"><i class="fa fa-check"></i><b>1.2</b> 学習器の定義</a></li>
<li class="chapter" data-level="1.3" data-path="quick-start.html"><a href="quick-start.html#section-1.3"><i class="fa fa-check"></i><b>1.3</b> (データを訓練セットとテストセットに分割する)</a></li>
<li class="chapter" data-level="1.4" data-path="quick-start.html"><a href="quick-start.html#section-1.4"><i class="fa fa-check"></i><b>1.4</b> 訓練</a></li>
<li class="chapter" data-level="1.5" data-path="quick-start.html"><a href="quick-start.html#section-1.5"><i class="fa fa-check"></i><b>1.5</b> 予測</a></li>
<li class="chapter" data-level="1.6" data-path="quick-start.html"><a href="quick-start.html#section-1.6"><i class="fa fa-check"></i><b>1.6</b> 評価</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="section-2.html"><a href="section-2.html"><i class="fa fa-check"></i><b>2</b> タスク</a><ul>
<li class="chapter" data-level="2.1" data-path="section-2.html"><a href="section-2.html#section-2.1"><i class="fa fa-check"></i><b>2.1</b> タスクの種類と作成</a><ul>
<li class="chapter" data-level="2.1.1" data-path="section-2.html"><a href="section-2.html#section-2.1.1"><i class="fa fa-check"></i><b>2.1.1</b> 回帰</a></li>
<li class="chapter" data-level="2.1.2" data-path="section-2.html"><a href="section-2.html#section-2.1.2"><i class="fa fa-check"></i><b>2.1.2</b> 分類</a></li>
<li class="chapter" data-level="2.1.3" data-path="section-2.html"><a href="section-2.html#section-2.1.3"><i class="fa fa-check"></i><b>2.1.3</b> 生存時間分析</a></li>
<li class="chapter" data-level="2.1.4" data-path="section-2.html"><a href="section-2.html#section-2.1.4"><i class="fa fa-check"></i><b>2.1.4</b> マルチラベル分類</a></li>
<li class="chapter" data-level="2.1.5" data-path="section-2.html"><a href="section-2.html#section-2.1.5"><i class="fa fa-check"></i><b>2.1.5</b> クラスター分析</a></li>
<li class="chapter" data-level="2.1.6" data-path="section-2.html"><a href="section-2.html#section-2.1.6"><i class="fa fa-check"></i><b>2.1.6</b> コスト考慮型分類</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="section-2.html"><a href="section-2.html#section-2.2"><i class="fa fa-check"></i><b>2.2</b> その他の設定</a></li>
<li class="chapter" data-level="2.3" data-path="section-2.html"><a href="section-2.html#section-2.3"><i class="fa fa-check"></i><b>2.3</b> タスクへのアクセス</a></li>
<li class="chapter" data-level="2.4" data-path="section-2.html"><a href="section-2.html#section-2.4"><i class="fa fa-check"></i><b>2.4</b> タスクの編集</a></li>
<li class="chapter" data-level="2.5" data-path="section-2.html"><a href="section-2.html#section-2.5"><i class="fa fa-check"></i><b>2.5</b> タスクの例と便利な関数</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="section-3.html"><a href="section-3.html"><i class="fa fa-check"></i><b>3</b> 学習器</a><ul>
<li class="chapter" data-level="3.1" data-path="section-3.html"><a href="section-3.html#section-3.1"><i class="fa fa-check"></i><b>3.1</b> 学習器を構築する</a></li>
<li class="chapter" data-level="3.2" data-path="section-3.html"><a href="section-3.html#section-3.2"><i class="fa fa-check"></i><b>3.2</b> 学習器へアクセスする</a></li>
<li class="chapter" data-level="3.3" data-path="section-3.html"><a href="section-3.html#section-3.3"><i class="fa fa-check"></i><b>3.3</b> 学習器の編集</a></li>
<li class="chapter" data-level="3.4" data-path="section-3.html"><a href="section-3.html#section-3.4"><i class="fa fa-check"></i><b>3.4</b> 学習器一覧</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="section-4.html"><a href="section-4.html"><i class="fa fa-check"></i><b>4</b> 学習器の訓練</a><ul>
<li class="chapter" data-level="4.1" data-path="section-4.html"><a href="section-4.html#section-4.1"><i class="fa fa-check"></i><b>4.1</b> 学習器モデルへのアクセス</a></li>
<li class="chapter" data-level="4.2" data-path="section-4.html"><a href="section-4.html#section-4.2"><i class="fa fa-check"></i><b>4.2</b> その他のオプションとコメント</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="-1.html"><a href="-1.html"><i class="fa fa-check"></i><b>5</b> 予測</a><ul>
<li class="chapter" data-level="5.1" data-path="-1.html"><a href="-1.html#section-5.1"><i class="fa fa-check"></i><b>5.1</b> 新しいデータに対する結果を予測する</a></li>
<li class="chapter" data-level="5.2" data-path="-1.html"><a href="-1.html#section-5.2"><i class="fa fa-check"></i><b>5.2</b> 予測へのアクセス</a></li>
<li class="chapter" data-level="5.3" data-path="-1.html"><a href="-1.html#-"><i class="fa fa-check"></i><b>5.3</b> 回帰: 標準誤差を取得する</a></li>
<li class="chapter" data-level="5.4" data-path="-1.html"><a href="-1.html#-"><i class="fa fa-check"></i><b>5.4</b> 分類とクラスタリング: 確率を取得する</a></li>
<li class="chapter" data-level="5.5" data-path="-1.html"><a href="-1.html#-"><i class="fa fa-check"></i><b>5.5</b> 分類: 混同行列を取得する</a></li>
<li class="chapter" data-level="5.6" data-path="-1.html"><a href="-1.html#-"><i class="fa fa-check"></i><b>5.6</b> 分類: 決定閾値の調整</a></li>
<li class="chapter" data-level="5.7" data-path="-1.html"><a href="-1.html#section-5.7"><i class="fa fa-check"></i><b>5.7</b> 予測の可視化</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="section-6.html"><a href="section-6.html"><i class="fa fa-check"></i><b>6</b> データの前処理</a><ul>
<li class="chapter" data-level="6.1" data-path="section-6.html"><a href="section-6.html#section-6.1"><i class="fa fa-check"></i><b>6.1</b> 前処理と学習器を融合する</a></li>
<li class="chapter" data-level="6.2" data-path="section-6.html"><a href="section-6.html#makepreprocwrappercaret"><i class="fa fa-check"></i><b>6.2</b> <code>makePreprocWrapperCaret</code>を使用した前処理</a></li>
<li class="chapter" data-level="6.3" data-path="section-6.html"><a href="section-6.html#section-6.3"><i class="fa fa-check"></i><b>6.3</b> 前処理オプションと学習器パラメータの連結チューニング</a></li>
<li class="chapter" data-level="6.4" data-path="section-6.html"><a href="section-6.html#section-6.4"><i class="fa fa-check"></i><b>6.4</b> 独自の前処理ラッパーを書く</a><ul>
<li class="chapter" data-level="6.4.1" data-path="section-6.html"><a href="section-6.html#section-6.4.1"><i class="fa fa-check"></i><b>6.4.1</b> 訓練関数の指定</a></li>
<li class="chapter" data-level="6.4.2" data-path="section-6.html"><a href="section-6.html#section-6.4.2"><i class="fa fa-check"></i><b>6.4.2</b> 予測関数の指定</a></li>
<li class="chapter" data-level="6.4.3" data-path="section-6.html"><a href="section-6.html#section-6.4.3"><i class="fa fa-check"></i><b>6.4.3</b> 前処理ラッパーの作成</a></li>
<li class="chapter" data-level="6.4.4" data-path="section-6.html"><a href="section-6.html#section-6.4.4"><i class="fa fa-check"></i><b>6.4.4</b> 前処理と学習器のパラメータを連結してチューニングする</a></li>
<li class="chapter" data-level="6.4.5" data-path="section-6.html"><a href="section-6.html#section-6.4.5"><i class="fa fa-check"></i><b>6.4.5</b> 前処理ラッパー関数</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="section-7.html"><a href="section-7.html"><i class="fa fa-check"></i><b>7</b> 学習器の性能を評価する</a><ul>
<li class="chapter" data-level="7.1" data-path="section-7.html"><a href="section-7.html#section-7.1"><i class="fa fa-check"></i><b>7.1</b> 利用可能な性能指標</a></li>
<li class="chapter" data-level="7.2" data-path="section-7.html"><a href="section-7.html#section-7.2"><i class="fa fa-check"></i><b>7.2</b> 指標の一覧</a></li>
<li class="chapter" data-level="7.3" data-path="section-7.html"><a href="section-7.html#section-7.3"><i class="fa fa-check"></i><b>7.3</b> 性能指標を計算する</a></li>
<li class="chapter" data-level="7.4" data-path="section-7.html"><a href="section-7.html#section-7.4"><i class="fa fa-check"></i><b>7.4</b> 指標計算に必要な情報</a></li>
<li class="chapter" data-level="7.5" data-path="section-7.html"><a href="section-7.html#section-7.5"><i class="fa fa-check"></i><b>7.5</b> 性能指標へのアクセス</a></li>
<li class="chapter" data-level="7.6" data-path="section-7.html"><a href="section-7.html#section-7.6"><i class="fa fa-check"></i><b>7.6</b> 2クラス分類</a><ul>
<li class="chapter" data-level="7.6.1" data-path="section-7.html"><a href="section-7.html#section-7.6.1"><i class="fa fa-check"></i><b>7.6.1</b> 性能と閾値の関係をプロットする</a></li>
<li class="chapter" data-level="7.6.2" data-path="section-7.html"><a href="section-7.html#roc"><i class="fa fa-check"></i><b>7.6.2</b> ROC</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="section-8.html"><a href="section-8.html"><i class="fa fa-check"></i><b>8</b> リサンプリング</a><ul>
<li class="chapter" data-level="8.1" data-path="section-8.html"><a href="section-8.html#section-8.1"><i class="fa fa-check"></i><b>8.1</b> リサンプリング手法を決める</a></li>
<li class="chapter" data-level="8.2" data-path="section-8.html"><a href="section-8.html#section-8.2"><i class="fa fa-check"></i><b>8.2</b> リサンプリングを実行する</a></li>
<li class="chapter" data-level="8.3" data-path="section-8.html"><a href="section-8.html#section-8.3"><i class="fa fa-check"></i><b>8.3</b> リサンプル結果へのアクセス</a><ul>
<li class="chapter" data-level="8.3.1" data-path="section-8.html"><a href="section-8.html#section-8.3.1"><i class="fa fa-check"></i><b>8.3.1</b> 予測値</a></li>
<li class="chapter" data-level="8.3.2" data-path="section-8.html"><a href="section-8.html#section-8.3.2"><i class="fa fa-check"></i><b>8.3.2</b> 訓練済みモデルの抽出</a></li>
<li class="chapter" data-level="8.3.3" data-path="section-8.html"><a href="section-8.html#section-8.3.3"><i class="fa fa-check"></i><b>8.3.3</b> 他の抽出方法</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="section-8.html"><a href="section-8.html#section-8.4"><i class="fa fa-check"></i><b>8.4</b> 階層化とブロック化</a><ul>
<li class="chapter" data-level="8.4.1" data-path="section-8.html"><a href="section-8.html#section-8.4.1"><i class="fa fa-check"></i><b>8.4.1</b> 目的変数の階層化</a></li>
<li class="chapter" data-level="8.4.2" data-path="section-8.html"><a href="section-8.html#section-8.4.2"><i class="fa fa-check"></i><b>8.4.2</b> 説明変数の階層化</a></li>
<li class="chapter" data-level="8.4.3" data-path="section-8.html"><a href="section-8.html#section-8.4.3"><i class="fa fa-check"></i><b>8.4.3</b> ブロック化</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="section-8.html"><a href="section-8.html#section-8.5"><i class="fa fa-check"></i><b>8.5</b> リサンプリングの詳細とリサンプルのインスタンス</a></li>
<li class="chapter" data-level="8.6" data-path="section-8.html"><a href="section-8.html#section-8.6"><i class="fa fa-check"></i><b>8.6</b> 性能指標の集約</a><ul>
<li class="chapter" data-level="8.6.1" data-path="-1.html"><a href="-1.html#-"><i class="fa fa-check"></i><b>8.6.1</b> 例: 一つの指標に複数の集約方法</a></li>
<li class="chapter" data-level="8.6.2" data-path="-1.html"><a href="-1.html#-"><i class="fa fa-check"></i><b>8.6.2</b> 例: 訓練セットの誤差を計算する</a></li>
<li class="chapter" data-level="8.6.3" data-path="-1.html"><a href="-1.html#-"><i class="fa fa-check"></i><b>8.6.3</b> 例: ブートストラップ</a></li>
</ul></li>
<li class="chapter" data-level="8.7" data-path="section-8.html"><a href="section-8.html#section-8.7"><i class="fa fa-check"></i><b>8.7</b> 便利な関数</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="section-9.html"><a href="section-9.html"><i class="fa fa-check"></i><b>9</b> ハイパーパラメータのチューニング</a><ul>
<li class="chapter" data-level="9.1" data-path="section-9.html"><a href="section-9.html#section-9.1"><i class="fa fa-check"></i><b>9.1</b> パラメータ探索空間の指定</a></li>
<li class="chapter" data-level="9.2" data-path="section-9.html"><a href="section-9.html#section-9.2"><i class="fa fa-check"></i><b>9.2</b> 最適化アルゴリズムの指定</a></li>
<li class="chapter" data-level="9.3" data-path="section-9.html"><a href="section-9.html#section-9.3"><i class="fa fa-check"></i><b>9.3</b> チューニングの実行</a></li>
<li class="chapter" data-level="9.4" data-path="section-9.html"><a href="section-9.html#section-9.4"><i class="fa fa-check"></i><b>9.4</b> チューニング結果へのアクセス</a></li>
<li class="chapter" data-level="9.5" data-path="section-9.html"><a href="section-9.html#section-9.5"><i class="fa fa-check"></i><b>9.5</b> ハイパーパラメータチューニングの影響を調査する</a></li>
<li class="chapter" data-level="9.6" data-path="section-9.html"><a href="section-9.html#section-9.6"><i class="fa fa-check"></i><b>9.6</b> その他いろいろ</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="section-10.html"><a href="section-10.html"><i class="fa fa-check"></i><b>10</b> ベンチマーク試験</a><ul>
<li class="chapter" data-level="10.1" data-path="section-10.html"><a href="section-10.html#section-10.1"><i class="fa fa-check"></i><b>10.1</b> ベンチマーク試験の実施</a><ul>
<li class="chapter" data-level="10.1.1" data-path="section-10.html"><a href="section-10.html#section-10.1.1"><i class="fa fa-check"></i><b>10.1.1</b> 実験を再現可能にする</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="section-10.html"><a href="section-10.html#section-10.2"><i class="fa fa-check"></i><b>10.2</b> ベンチマーク結果へのアクセス</a><ul>
<li class="chapter" data-level="10.2.1" data-path="section-10.html"><a href="section-10.html#section-10.2.1"><i class="fa fa-check"></i><b>10.2.1</b> 学習器の性能</a></li>
<li class="chapter" data-level="10.2.2" data-path="section-10.html"><a href="section-10.html#-2"><i class="fa fa-check"></i><b>10.2.2</b> 予測</a></li>
<li class="chapter" data-level="10.2.3" data-path="section-10.html"><a href="section-10.html#id"><i class="fa fa-check"></i><b>10.2.3</b> ID</a></li>
<li class="chapter" data-level="10.2.4" data-path="section-10.html"><a href="section-10.html#section-10.2.4"><i class="fa fa-check"></i><b>10.2.4</b> フィット済みモデル</a></li>
<li class="chapter" data-level="10.2.5" data-path="section-10.html"><a href="section-10.html#section-10.2.5"><i class="fa fa-check"></i><b>10.2.5</b> 学習器と性能指標</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="section-10.html"><a href="section-10.html#section-10.3"><i class="fa fa-check"></i><b>10.3</b> ベンチマーク結果のマージ</a></li>
<li class="chapter" data-level="10.4" data-path="section-10.html"><a href="section-10.html#section-10.4"><i class="fa fa-check"></i><b>10.4</b> ベンチマークの分析と可視化</a><ul>
<li class="chapter" data-level="10.4.1" data-path="section-10.html"><a href="section-10.html#section-10.4.1"><i class="fa fa-check"></i><b>10.4.1</b> 例：線形判別分析と分類木、ランダムフォレストの比較</a></li>
<li class="chapter" data-level="10.4.2" data-path="section-10.html"><a href="section-10.html#section-10.4.2"><i class="fa fa-check"></i><b>10.4.2</b> 可視化</a></li>
<li class="chapter" data-level="10.4.3" data-path="section-10.html"><a href="section-10.html#section-10.4.3"><i class="fa fa-check"></i><b>10.4.3</b> 集約結果の可視化</a></li>
<li class="chapter" data-level="10.4.4" data-path="section-10.html"><a href="section-10.html#section-10.4.4"><i class="fa fa-check"></i><b>10.4.4</b> 順位の計算と可視化</a></li>
<li class="chapter" data-level="10.4.5" data-path="section-10.html"><a href="section-10.html#section-10.4.5"><i class="fa fa-check"></i><b>10.4.5</b> 仮説検定で学習器を比較する</a></li>
<li class="chapter" data-level="10.4.6" data-path="section-10.html"><a href="section-10.html#section-10.4.6"><i class="fa fa-check"></i><b>10.4.6</b> 臨界差ダイアグラム</a></li>
<li class="chapter" data-level="10.4.7" data-path="section-10.html"><a href="section-10.html#section-10.4.7"><i class="fa fa-check"></i><b>10.4.7</b> プロットの調整</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="section-10.html"><a href="section-10.html#section-10.5"><i class="fa fa-check"></i><b>10.5</b> その他のコメント</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="section-11.html"><a href="section-11.html"><i class="fa fa-check"></i><b>11</b> 並列化</a><ul>
<li class="chapter" data-level="11.1" data-path="section-11.html"><a href="section-11.html#section-11.1"><i class="fa fa-check"></i><b>11.1</b> 並列化レベル</a></li>
<li class="chapter" data-level="11.2" data-path="section-11.html"><a href="section-11.html#section-11.2"><i class="fa fa-check"></i><b>11.2</b> 自作の学習器と並列化</a></li>
<li class="chapter" data-level="11.3" data-path="section-11.html"><a href="section-11.html#section-11.3"><i class="fa fa-check"></i><b>11.3</b> 並列化の話はこれで終わりだ！</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="section-12.html"><a href="section-12.html"><i class="fa fa-check"></i><b>12</b> いろいろな可視化</a><ul>
<li class="chapter" data-level="12.1" data-path="section-12.html"><a href="section-12.html#generationplotting"><i class="fa fa-check"></i><b>12.1</b> generation関数とplotting関数</a><ul>
<li class="chapter" data-level="12.1.1" data-path="section-12.html"><a href="section-12.html#section-12.1.1"><i class="fa fa-check"></i><b>12.1.1</b> 例</a></li>
<li class="chapter" data-level="12.1.2" data-path="section-12.html"><a href="section-12.html#section-12.1.2"><i class="fa fa-check"></i><b>12.1.2</b> プロットのカスタマイズ</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="section-12.html"><a href="section-12.html#generationplotting"><i class="fa fa-check"></i><b>12.2</b> 利用可能なgeneration関数とplotting関数</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">mlrパッケージチュートリアル - Quick Walkthrough編</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="section-12" class="section level1">
<h1><span class="header-section-number">Section 12</span> いろいろな可視化</h1>
<div id="generationplotting" class="section level2">
<h2><span class="header-section-number">12.1</span> generation関数とplotting関数</h2>
<p><code>mlr</code>の可視化機能は、プロットのためのデータを生成する<strong>generation</strong>関数と、その出力を使ってプロットを作成する<strong>plotting</strong>関数から成っている。プロット関数は<code>ggplot2</code>か<code>ggvis</code>パッケージを使ってプロットを作成する(<code>ggvis</code>の方はまだ試験的段階にある)。</p>
<p>可視化機能をこのように分けたことで、ユーザーはgeneration関数を利用して容易にプロットのカスタマイズができるようになっている。plotting関数の中で行われる唯一のデータ変換はデータの成形である。成形されたデータには、plotting関数を呼び出すことで作成される<code>ggplot</code>オブジェクトからアクセスすることもできる。</p>
<p>それぞれの関数は次のように命名されている。</p>
<ul>
<li>generate関数は<code>generate</code>から始まり、次に関数の目的がtitle caseで続き、最後に<code>Data</code>が付け加えられる。すなわち、関数名は<code>generateFunctionPurposeData</code>といった具合になる。generate関数により作成されるオブジェクトは<code>FunctionPurposeData</code>クラスである。</li>
<li>plotting関数は<code>plot</code>に関数の目的が続く形の名前となる。すなわち、<code>plotFunctionPurpose</code>といった具合だ。</li>
<li><code>ggvis</code>用いたプロット関数名は末尾に<code>GGVIS</code>を付加する。</li>
</ul>
<div id="section-12.1.1" class="section level3">
<h3><span class="header-section-number">12.1.1</span> 例</h3>
<p>まず、<code>sonar.task</code>に対する2クラス分類問題で、分類性能を決定閾値の関数と見立ててプロットする例を示す。対応するgeneration関数は<code>generateThreshVsPerfData</code>関数であり、この関数により生成される<code>ThreshVsPerfData</code>クラスのオブジェクトは<code>$data</code>スロットにプロットするためのデータを含む。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">lrn =<span class="st"> </span><span class="kw">makeLearner</span>(<span class="st">&quot;classif.lda&quot;</span>, <span class="dt">predict.type =</span> <span class="st">&quot;prob&quot;</span>)
n =<span class="st"> </span><span class="kw">getTaskSize</span>(sonar.task)
mod =<span class="st"> </span><span class="kw">train</span>(lrn, <span class="dt">task =</span> sonar.task, <span class="dt">subset =</span> <span class="kw">seq</span>(<span class="dv">1</span>, n, <span class="dt">by =</span> <span class="dv">2</span>))
pred =<span class="st"> </span><span class="kw">predict</span>(mod, <span class="dt">task =</span> sonar.task, <span class="dt">subset =</span> <span class="kw">seq</span>(<span class="dv">2</span>, n, <span class="dt">by =</span> <span class="dv">2</span>))
d =<span class="st"> </span><span class="kw">generateThreshVsPerfData</span>(pred, <span class="dt">measures =</span> <span class="kw">list</span>(fpr, fnr, mmce))

<span class="kw">class</span>(d)</code></pre></div>
<pre><code>$&gt; [1] &quot;ThreshVsPerfData&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(d<span class="op">$</span>data)</code></pre></div>
<pre><code>$&gt;         fpr       fnr      mmce  threshold
$&gt; 1 1.0000000 0.0000000 0.4615385 0.00000000
$&gt; 2 0.3541667 0.1964286 0.2692308 0.01010101
$&gt; 3 0.3333333 0.2321429 0.2788462 0.02020202
$&gt; 4 0.3333333 0.2321429 0.2788462 0.03030303
$&gt; 5 0.3333333 0.2321429 0.2788462 0.04040404
$&gt; 6 0.3125000 0.2321429 0.2692308 0.05050505</code></pre>
<p>いま作成したオブジェクトを<code>mlr</code>の組み込み関数を使ってプロットするには、<code>plotThreshVsPref</code>関数を用いる。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plotThreshVsPerf</span>(d)</code></pre></div>
<p><img src="mlr_tutorial_ja_files/figure-html/unnamed-chunk-224-1.png" width="672" /></p>
<p>デフォルトでは各パネルのラベルには性能指標の名前が使用される。これは他のplotting関数でも同様である。名前は<code>Measure</code>クラスのオブジェクトの<code>$name</code>スロットに格納されている。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">fpr<span class="op">$</span>name</code></pre></div>
<pre><code>$&gt; [1] &quot;False positive rate&quot;</code></pre>
<p><code>$name</code>の代わりに<code>$id</code>スロットの値をプロットに使うこともできる。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">fpr<span class="op">$</span>id</code></pre></div>
<pre><code>$&gt; [1] &quot;fpr&quot;</code></pre>
<p>この値を使う場合は、<code>pretty.names = FALSE</code>を指定する。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plotThreshVsPerf</span>(d, <span class="dt">pretty.names =</span> <span class="ot">FALSE</span>)</code></pre></div>
<p><img src="mlr_tutorial_ja_files/figure-html/unnamed-chunk-227-1.png" width="672" /></p>
</div>
<div id="section-12.1.2" class="section level3">
<h3><span class="header-section-number">12.1.2</span> プロットのカスタマイズ</h3>
<p>組み込みのプロットや、生成データに基いて作成した独自のプロットは簡単にカスタマイズできる。</p>
<p>おそらく、ほとんどの場合ラベルや注釈を変更したいと思うだろう。<code>ggplot</code>オブジェクトに対してこれを行うためには、<code>ylab</code>や<code>labeller</code>などの関数を利用する。さらに、生成データや<code>ggplot</code>オブジェクトに含まれるデータを変更するという手もある。これは大抵の場合、列名や水準名の変更である。</p>
<p>先程のプロットの軸と各パネルのラベルを変更してみよう。</p>
<p>例えば、次のような変更を施したいとする。</p>
<ul>
<li>パネルの表示順序を変更し、<code>mmce</code>を最初にしたい。</li>
<li>パネルのラベル名が長いので、例えば<code>Mean misclassification error</code>を<code>Error rate</code>にしたい。</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ggplot2)
plt =<span class="st"> </span><span class="kw">plotThreshVsPerf</span>(d, <span class="dt">pretty.names =</span> <span class="ot">FALSE</span>)

plt<span class="op">$</span>data<span class="op">$</span>measure =<span class="st"> </span>
<span class="st">  </span><span class="kw">factor</span>(plt<span class="op">$</span>data<span class="op">$</span>measure,
         <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">&quot;mmce&quot;</span>, <span class="st">&quot;fpr&quot;</span>, <span class="st">&quot;fnr&quot;</span>), <span class="co"># 水準の順序の変更</span>
         <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;Error rate&quot;</span>, <span class="st">&quot;False positive rate&quot;</span>, <span class="st">&quot;False negative rate&quot;</span>)) <span class="co"># 水準名の変更</span>
plt <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">xlab</span>(<span class="st">&quot;Cutoff&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="co"># x軸ラベルの変更</span>
<span class="st">  </span><span class="kw">ylab</span>(<span class="st">&quot;Performance&quot;</span>) <span class="co">#y軸ラベルの変更</span></code></pre></div>
<p><img src="mlr_tutorial_ja_files/figure-html/unnamed-chunk-228-1.png" width="672" /></p>
<p><code>labeller</code>関数は<code>facet_wrap</code>か<code>facet_grid</code>と合わせて使う必要があるが、パネルの並べ方を変更したり、軸のリミットに影響を与えたいと考えている場合には便利である。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">plt =<span class="st"> </span><span class="kw">plotThreshVsPerf</span>(d, <span class="dt">pretty.names =</span> <span class="ot">FALSE</span>)

measure_names =<span class="st"> </span><span class="kw">c</span>(
  <span class="dt">fpr =</span> <span class="st">&quot;False positive rate&quot;</span>,
  <span class="dt">fnr =</span> <span class="st">&quot;False negative rate&quot;</span>,
  <span class="dt">mmce =</span> <span class="st">&quot;Error rate&quot;</span>
)

plt <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>measure, <span class="dt">labeller =</span> <span class="kw">labeller</span>(<span class="dt">measure =</span> measure_names), <span class="dt">ncol =</span> <span class="dv">2</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">xlab</span>(<span class="st">&quot;Decision threshold&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">ylab</span>(<span class="st">&quot;Performance&quot;</span>)</code></pre></div>
<p><img src="mlr_tutorial_ja_files/figure-html/unnamed-chunk-229-1.png" width="672" /></p>
<p>plotting関数を使わずに、generation関数で生成したデータに基いてプロットを作成することもできる。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(d<span class="op">$</span>data, <span class="kw">aes</span>(threshold, fpr)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_line</span>()</code></pre></div>
<p><img src="mlr_tutorial_ja_files/figure-html/unnamed-chunk-230-1.png" width="672" /></p>
<p>generation関数がプロット関数と分かれていることにより、<code>graphics</code>や<code>lattice</code>パッケージを用いたプロットを作成する場合にも対応できる。以下に<code>lattice</code>で<code>plotThreshVsPref</code>と同様のプロットを作成する例を示そう。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">lattice<span class="op">::</span><span class="kw">xyplot</span>(fpr <span class="op">+</span><span class="st"> </span>fnr <span class="op">+</span><span class="st"> </span>mmce <span class="op">~</span><span class="st"> </span>threshold,
                <span class="dt">data =</span> d<span class="op">$</span>data, 
                <span class="dt">type =</span> <span class="st">&quot;l&quot;</span>, 
                <span class="dt">ylab =</span> <span class="st">&quot;performance&quot;</span>, 
                <span class="dt">outer =</span> <span class="ot">TRUE</span>,
                <span class="dt">scales =</span> <span class="kw">list</span>(<span class="dt">relation =</span> <span class="st">&quot;free&quot;</span>),
                <span class="dt">strip =</span> lattice<span class="op">::</span><span class="kw">strip.custom</span>(
                  <span class="dt">factor.levels =</span> <span class="kw">sapply</span>(d<span class="op">$</span>measures, <span class="cf">function</span>(x) x<span class="op">$</span>name),
                  <span class="dt">par.strip.text =</span> <span class="kw">list</span>(<span class="fl">0.8</span>)
                  ))</code></pre></div>
<p><img src="mlr_tutorial_ja_files/figure-html/unnamed-chunk-231-1.png" width="672" /></p>
<p>もう一つ、<code>plotPartialDependence</code>を使ってプロットを作成したのち、<code>ggplot</code>オブジェクトからデータを取り出して<code>graphics::plot</code>による伝統的なプロットも作成する例を見てみよう。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sonar =<span class="st"> </span><span class="kw">getTaskData</span>(sonar.task)
pd =<span class="st"> </span><span class="kw">generatePartialDependenceData</span>(mod, sonar, <span class="st">&quot;V11&quot;</span>)
plt =<span class="st"> </span><span class="kw">plotPartialDependence</span>(pd)
plt</code></pre></div>
<p><img src="mlr_tutorial_ja_files/figure-html/unnamed-chunk-232-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(Probability <span class="op">~</span><span class="st"> </span>Value, <span class="dt">data =</span> plt<span class="op">$</span>data, <span class="dt">type =</span> <span class="st">&quot;b&quot;</span>, <span class="dt">xlab =</span> plt<span class="op">$</span>data<span class="op">$</span>Feature[<span class="dv">1</span>])</code></pre></div>
<p><img src="mlr_tutorial_ja_files/figure-html/unnamed-chunk-233-1.png" width="672" /></p>
</div>
</div>
<div id="generationplotting" class="section level2">
<h2><span class="header-section-number">12.2</span> 利用可能なgeneration関数とplotting関数</h2>
<p>以下に現在利用可能なgeneration関数およびplotting関数と、その詳細を説明するチュートリアルページへのリンクの一覧を示す。</p>
<p>なお、下記の点に注意してもらいたい。</p>
<ul>
<li><code>plotTuneMultiCritResult</code>などはgeneration関数が無いため、ここでは言及していない。</li>
<li><code>plotThreshVsPref</code>及び<code>plotROCCurves</code>はいずれも<code>generateThreshVsPrefData</code>の結果を扱える。</li>
<li><code>plotPartialDependence</code>及び<code>plotPartialDependenceGGVIS</code>は、いずれも<code>generatePartialDependenceData</code>及び<code>generateFunctionalANOVAData</code>の結果の両方を扱える。</li>
</ul>
<table>
<colgroup>
<col width="19%" />
<col width="27%" />
<col width="25%" />
<col width="26%" />
</colgroup>
<thead>
<tr class="header">
<th>generation関数</th>
<th>plotting関数(ggplot2)</th>
<th>plotting関数(ggvis)</th>
<th>チュートリアルページ</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><a href="https://www.rdocumentation.org/packages/mlr/versions/2.10/topics/generateThreshVsPerfData">generateThreshVsPerfData</a></td>
<td><a href="https://www.rdocumentation.org/packages/mlr/versions/2.10/topics/plotThreshVsPerf">plotThreshVsPerf</a></td>
<td><a href="https://www.rdocumentation.org/packages/mlr/versions/2.10/topics/plotThreshVsPerfGGVIS">plotThreshVsPerfGGVIS</a></td>
<td><a href="https://mlr-org.github.io/mlr-tutorial/devel/html/performance/index.html">Performance</a></td>
</tr>
<tr class="even">
<td></td>
<td><a href="https://www.rdocumentation.org/packages/mlr/versions/2.10/topics/plotROCCurves">plotROCCurves</a></td>
<td>–</td>
<td><a href="https://mlr-org.github.io/mlr-tutorial/devel/html/roc_analysis/index.html">ROC Analysis</a></td>
</tr>
<tr class="odd">
<td><a href="https://www.rdocumentation.org/packages/mlr/versions/2.10/topics/generateCritDifferencesData">generateCritDifferencesData</a></td>
<td><a href="https://www.rdocumentation.org/packages/mlr/versions/2.10/topics/plotCritDifferences">plotCritDifferences</a></td>
<td>–</td>
<td><a href="https://mlr-org.github.io/mlr-tutorial/devel/html/benchmark_experiments/index.html">Benchmark Experiments</a></td>
</tr>
<tr class="even">
<td><a href="https://www.rdocumentation.org/packages/mlr/versions/2.10/topics/generateHyperParsEffectData">generateHyperParsEffectData</a></td>
<td><a href="https://www.rdocumentation.org/packages/mlr/versions/2.10/topics/plotHyperParsEffect">plotHyperParsEffect</a></td>
<td></td>
<td><a href="https://mlr-org.github.io/mlr-tutorial/devel/html/tune/index.html">Tuning</a>, <a href="https://mlr-org.github.io/mlr-tutorial/devel/html/hyperpar_tuning_effects/index.html">Hyperparameter Tuning Effects</a></td>
</tr>
<tr class="odd">
<td><a href="https://www.rdocumentation.org/packages/mlr/versions/2.10/topics/generateFilterValuesData">generateFilterValuesData</a></td>
<td><a href="https://www.rdocumentation.org/packages/mlr/versions/2.10/topics/plotFilterValues">plotFilterValues</a></td>
<td><a href="https://www.rdocumentation.org/packages/mlr/versions/2.10/topics/plotFilterValuesGGVIS">plotFilterValuesGGVIS</a></td>
<td><a href="https://mlr-org.github.io/mlr-tutorial/devel/html/feature_selection/index.html">Feature Selection</a></td>
</tr>
<tr class="even">
<td><a href="https://www.rdocumentation.org/packages/mlr/versions/2.10/topics/generateLearningCurveData">generateLearningCurveData</a></td>
<td><a href="https://www.rdocumentation.org/packages/mlr/versions/2.10/topics/plotLearningCurve">plotLearningCurve</a></td>
<td><a href="https://www.rdocumentation.org/packages/mlr/versions/2.10/topics/plotLearningCurveGGVIS">plotLearningCurveGGVIS</a></td>
<td><a href="https://mlr-org.github.io/mlr-tutorial/devel/html/learning_curve/index.html">Learning Curves</a></td>
</tr>
<tr class="odd">
<td><a href="https://www.rdocumentation.org/packages/mlr/versions/2.10/topics/generatePartialDependenceData">generatePartialDependenceData</a></td>
<td><a href="https://www.rdocumentation.org/packages/mlr/versions/2.10/topics/plotPartialDependence">plotPartialDependence</a></td>
<td><a href="https://www.rdocumentation.org/packages/mlr/versions/2.10/topics/plotPartialDependenceGGVIS">plotPartialDependenceGGVIS</a></td>
<td><a href="https://mlr-org.github.io/mlr-tutorial/devel/html/partial_dependence/index.html">Partial Dependence Plots</a></td>
</tr>
<tr class="even">
<td><a href="https://www.rdocumentation.org/packages/mlr/versions/2.10/topics/generateFunctionalANOVAData">generateFunctionalANOVAData</a></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td><a href="https://www.rdocumentation.org/packages/mlr/versions/2.10/topics/generateCalibrationData">generateCalibrationData</a></td>
<td><a href="https://www.rdocumentation.org/packages/mlr/versions/2.10/topics/plotCalibration">plotCalibration</a></td>
<td>–</td>
<td><a href="https://mlr-org.github.io/mlr-tutorial/devel/html/classifier_calibration/index.html">Classifier Calibration Plots</a></td>
</tr>
</tbody>
</table>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="section-11.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
