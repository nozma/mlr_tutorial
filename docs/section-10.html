<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>mlrパッケージチュートリアル</title>
  <meta name="description" content="mlrパッケージチュートリアル">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="mlrパッケージチュートリアル" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="mlrパッケージチュートリアル" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="section-9.html">

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="index.html#section"></a></li>
<li class="chapter" data-level="1" data-path="quick-start.html"><a href="quick-start.html"><i class="fa fa-check"></i><b>1</b> Quick start</a><ul>
<li class="chapter" data-level="1.1" data-path="quick-start.html"><a href="quick-start.html#section-1.1"><i class="fa fa-check"></i><b>1.1</b> タスクの定義</a></li>
<li class="chapter" data-level="1.2" data-path="quick-start.html"><a href="quick-start.html#section-1.2"><i class="fa fa-check"></i><b>1.2</b> 学習器の定義</a></li>
<li class="chapter" data-level="1.3" data-path="quick-start.html"><a href="quick-start.html#section-1.3"><i class="fa fa-check"></i><b>1.3</b> (データを訓練セットとテストセットに分割する)</a></li>
<li class="chapter" data-level="1.4" data-path="quick-start.html"><a href="quick-start.html#section-1.4"><i class="fa fa-check"></i><b>1.4</b> 訓練</a></li>
<li class="chapter" data-level="1.5" data-path="quick-start.html"><a href="quick-start.html#section-1.5"><i class="fa fa-check"></i><b>1.5</b> 予測</a></li>
<li class="chapter" data-level="1.6" data-path="quick-start.html"><a href="quick-start.html#section-1.6"><i class="fa fa-check"></i><b>1.6</b> 評価</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="section-2.html"><a href="section-2.html"><i class="fa fa-check"></i><b>2</b> タスク</a><ul>
<li class="chapter" data-level="2.1" data-path="section-2.html"><a href="section-2.html#section-2.1"><i class="fa fa-check"></i><b>2.1</b> タスクの種類と作成</a><ul>
<li class="chapter" data-level="2.1.1" data-path="section-2.html"><a href="section-2.html#section-2.1.1"><i class="fa fa-check"></i><b>2.1.1</b> 回帰</a></li>
<li class="chapter" data-level="2.1.2" data-path="section-2.html"><a href="section-2.html#section-2.1.2"><i class="fa fa-check"></i><b>2.1.2</b> 分類</a></li>
<li class="chapter" data-level="2.1.3" data-path="section-2.html"><a href="section-2.html#section-2.1.3"><i class="fa fa-check"></i><b>2.1.3</b> 生存時間分析</a></li>
<li class="chapter" data-level="2.1.4" data-path="section-2.html"><a href="section-2.html#section-2.1.4"><i class="fa fa-check"></i><b>2.1.4</b> マルチラベル分類</a></li>
<li class="chapter" data-level="2.1.5" data-path="section-2.html"><a href="section-2.html#section-2.1.5"><i class="fa fa-check"></i><b>2.1.5</b> クラスター分析</a></li>
<li class="chapter" data-level="2.1.6" data-path="section-2.html"><a href="section-2.html#section-2.1.6"><i class="fa fa-check"></i><b>2.1.6</b> コスト考慮型分類</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="section-2.html"><a href="section-2.html#section-2.2"><i class="fa fa-check"></i><b>2.2</b> その他の設定</a></li>
<li class="chapter" data-level="2.3" data-path="section-2.html"><a href="section-2.html#section-2.3"><i class="fa fa-check"></i><b>2.3</b> タスクへのアクセス</a></li>
<li class="chapter" data-level="2.4" data-path="section-2.html"><a href="section-2.html#id"><i class="fa fa-check"></i><b>2.4</b> ID</a></li>
<li class="chapter" data-level="2.5" data-path="section-2.html"><a href="section-2.html#section-2.5"><i class="fa fa-check"></i><b>2.5</b> タスクの種類</a></li>
<li class="chapter" data-level="2.6" data-path="section-2.html"><a href="section-2.html#section-2.6"><i class="fa fa-check"></i><b>2.6</b> 目的変数の列名</a></li>
<li class="chapter" data-level="2.7" data-path="section-2.html"><a href="section-2.html#section-2.7"><i class="fa fa-check"></i><b>2.7</b> 観測値の数</a></li>
<li class="chapter" data-level="2.8" data-path="section-2.html"><a href="section-2.html#section-2.8"><i class="fa fa-check"></i><b>2.8</b> 特徴量の種類数</a></li>
<li class="chapter" data-level="2.9" data-path="section-2.html"><a href="section-2.html#section-2.9"><i class="fa fa-check"></i><b>2.9</b> クラスレベル</a></li>
<li class="chapter" data-level="2.10" data-path="section-2.html"><a href="section-2.html#section-2.10"><i class="fa fa-check"></i><b>2.10</b> タスク内のデータ</a></li>
<li class="chapter" data-level="2.11" data-path="section-2.html"><a href="section-2.html#section-2.11"><i class="fa fa-check"></i><b>2.11</b> 特徴量の名前</a></li>
<li class="chapter" data-level="2.12" data-path="section-2.html"><a href="section-2.html#section-2.12"><i class="fa fa-check"></i><b>2.12</b> 目的変数の値</a></li>
<li class="chapter" data-level="2.13" data-path="section-2.html"><a href="section-2.html#section-2.13"><i class="fa fa-check"></i><b>2.13</b> コスト行列</a></li>
<li class="chapter" data-level="2.14" data-path="section-2.html"><a href="section-2.html#section-2.14"><i class="fa fa-check"></i><b>2.14</b> タスクの編集</a></li>
<li class="chapter" data-level="2.15" data-path="section-2.html"><a href="section-2.html#data"><i class="fa fa-check"></i><b>2.15</b> dataの編集</a></li>
<li class="chapter" data-level="2.16" data-path="section-2.html"><a href="section-2.html#section-2.16"><i class="fa fa-check"></i><b>2.16</b> タスクの例と便利な関数</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="section-3.html"><a href="section-3.html"><i class="fa fa-check"></i><b>3</b> 学習器</a><ul>
<li class="chapter" data-level="3.1" data-path="section-3.html"><a href="section-3.html#section-3.1"><i class="fa fa-check"></i><b>3.1</b> 学習器を構築する</a></li>
<li class="chapter" data-level="3.2" data-path="section-3.html"><a href="section-3.html#section-3.2"><i class="fa fa-check"></i><b>3.2</b> ランダムフォレストによる分類で確率も出力する</a></li>
<li class="chapter" data-level="3.3" data-path="section-3.html"><a href="section-3.html#section-3.3"><i class="fa fa-check"></i><b>3.3</b> 勾配ブースティング回帰でハイパーパラメータも指定する</a></li>
<li class="chapter" data-level="3.4" data-path="section-2.html"><a href="section-2.html#id"><i class="fa fa-check"></i><b>3.4</b> コックス比例ハザードモデルでidも指定する</a></li>
<li class="chapter" data-level="3.5" data-path="section-3.html"><a href="section-3.html#k"><i class="fa fa-check"></i><b>3.5</b> K平均法でクラスタ数を指定する</a></li>
<li class="chapter" data-level="3.6" data-path="section-3.html"><a href="section-3.html#random-ferns"><i class="fa fa-check"></i><b>3.6</b> マルチラベルRandom-Ferns</a></li>
<li class="chapter" data-level="3.7" data-path="section-3.html"><a href="section-3.html#section-3.7"><i class="fa fa-check"></i><b>3.7</b> 学習器へアクセスする</a></li>
<li class="chapter" data-level="3.8" data-path="section-3.html"><a href="section-3.html#section-3.8"><i class="fa fa-check"></i><b>3.8</b> デフォルト値以外を指定したハイパーパラメータ</a></li>
<li class="chapter" data-level="3.9" data-path="section-3.html"><a href="section-3.html#section-3.9"><i class="fa fa-check"></i><b>3.9</b> ハイパーパラメータ一覧</a></li>
<li class="chapter" data-level="3.10" data-path="section-3.html"><a href="section-3.html#section-3.10"><i class="fa fa-check"></i><b>3.10</b> ハイパーパラメータのセッティングの取得</a></li>
<li class="chapter" data-level="3.11" data-path="section-3.html"><a href="section-3.html#section-3.11"><i class="fa fa-check"></i><b>3.11</b> 設定可能なハイパーパラメータの詳細一覧</a></li>
<li class="chapter" data-level="3.12" data-path="section-2.html"><a href="section-2.html#id"><i class="fa fa-check"></i><b>3.12</b> 学習器のID</a></li>
<li class="chapter" data-level="3.13" data-path="section-3.html"><a href="section-3.html#section-3.13"><i class="fa fa-check"></i><b>3.13</b> 学習器の略称</a></li>
<li class="chapter" data-level="3.14" data-path="section-3.html"><a href="section-3.html#section-3.14"><i class="fa fa-check"></i><b>3.14</b> 学習機のタイプ</a></li>
<li class="chapter" data-level="3.15" data-path="section-3.html"><a href="section-3.html#section-3.15"><i class="fa fa-check"></i><b>3.15</b> 学習器に必要なパッケージ</a></li>
<li class="chapter" data-level="3.16" data-path="section-3.html"><a href="section-3.html#section-3.16"><i class="fa fa-check"></i><b>3.16</b> 学習器の編集</a></li>
<li class="chapter" data-level="3.17" data-path="section-2.html"><a href="section-2.html#id"><i class="fa fa-check"></i><b>3.17</b> IDの変更</a></li>
<li class="chapter" data-level="3.18" data-path="section-3.html"><a href="section-3.html#section-3.18"><i class="fa fa-check"></i><b>3.18</b> 予測タイプの変更</a></li>
<li class="chapter" data-level="3.19" data-path="section-3.html"><a href="section-3.html#section-3.19"><i class="fa fa-check"></i><b>3.19</b> ハイパーパラメータ</a></li>
<li class="chapter" data-level="3.20" data-path="section-3.html"><a href="section-3.html#section-3.20"><i class="fa fa-check"></i><b>3.20</b> 設定値を除去してデフォルト値に戻す</a></li>
<li class="chapter" data-level="3.21" data-path="section-3.html"><a href="section-3.html#section-3.21"><i class="fa fa-check"></i><b>3.21</b> 学習器一覧</a></li>
<li class="chapter" data-level="3.22" data-path="section-3.html"><a href="section-3.html#section-3.22"><i class="fa fa-check"></i><b>3.22</b> 全ての学習器一覧</a></li>
<li class="chapter" data-level="3.23" data-path="section-3.html"><a href="section-3.html#section-3.23"><i class="fa fa-check"></i><b>3.23</b> 確率を出力可能な分類器</a></li>
<li class="chapter" data-level="3.24" data-path="section-3.html"><a href="section-3.html#iris"><i class="fa fa-check"></i><b>3.24</b> iris(つまり多クラス)に使えて、確率を出力できる</a></li>
<li class="chapter" data-level="3.25" data-path="section-3.html"><a href="section-3.html#learner"><i class="fa fa-check"></i><b>3.25</b> Learnerオブジェクトを作成することもできる</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="section-4.html"><a href="section-4.html"><i class="fa fa-check"></i><b>4</b> 学習器の訓練</a><ul>
<li class="chapter" data-level="4.1" data-path="section-4.html"><a href="section-4.html#section-4.1"><i class="fa fa-check"></i><b>4.1</b> タスクの作成</a></li>
<li class="chapter" data-level="4.2" data-path="section-4.html"><a href="section-4.html#section-4.2"><i class="fa fa-check"></i><b>4.2</b> 学習器の作成</a></li>
<li class="chapter" data-level="4.3" data-path="section-4.html"><a href="section-4.html#-1"><i class="fa fa-check"></i><b>4.3</b> 学習器の訓練</a></li>
<li class="chapter" data-level="4.4" data-path="section-4.html"><a href="section-4.html#section-4.4"><i class="fa fa-check"></i><b>4.4</b> 学習器モデルへのアクセス</a></li>
<li class="chapter" data-level="4.5" data-path="section-4.html"><a href="section-4.html#-1"><i class="fa fa-check"></i><b>4.5</b> タスクの作成</a></li>
<li class="chapter" data-level="4.6" data-path="section-4.html"><a href="section-4.html#-1"><i class="fa fa-check"></i><b>4.6</b> 学習器の作成</a></li>
<li class="chapter" data-level="4.7" data-path="section-4.html"><a href="section-4.html#section-4.7"><i class="fa fa-check"></i><b>4.7</b> 学習機の訓練</a></li>
<li class="chapter" data-level="4.8" data-path="section-4.html"><a href="section-4.html#section-4.8"><i class="fa fa-check"></i><b>4.8</b> モデルの中身を覗いてみる</a></li>
<li class="chapter" data-level="4.9" data-path="section-4.html"><a href="section-4.html#section-4.9"><i class="fa fa-check"></i><b>4.9</b> フィット済みモデルの抽出</a></li>
<li class="chapter" data-level="4.10" data-path="section-4.html"><a href="section-4.html#section-4.10"><i class="fa fa-check"></i><b>4.10</b> その他のオプションとコメント</a></li>
<li class="chapter" data-level="4.11" data-path="section-4.html"><a href="section-4.html#section-4.11"><i class="fa fa-check"></i><b>4.11</b> 観測値の例数を取得</a></li>
<li class="chapter" data-level="4.12" data-path="section-4.html"><a href="section-4.html#nn3"><i class="fa fa-check"></i><b>4.12</b> 1:nからランダムにn/3個非復元抽出</a></li>
<li class="chapter" data-level="4.13" data-path="section-4.html"><a href="section-4.html#section-4.13"><i class="fa fa-check"></i><b>4.13</b> 学習器を訓練する</a></li>
<li class="chapter" data-level="4.14" data-path="section-4.html"><a href="section-4.html#section-4.14"><i class="fa fa-check"></i><b>4.14</b> 観測値の重みを計算する</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="section-4.html"><a href="section-4.html#-1"><i class="fa fa-check"></i><b>5</b> 予測</a><ul>
<li class="chapter" data-level="5.1" data-path="-1.html"><a href="-1.html"><i class="fa fa-check"></i><b>5.1</b> 新しいデータに対する結果を予測する</a></li>
<li class="chapter" data-level="5.2" data-path="-1.html"><a href="-1.html#section-5.2"><i class="fa fa-check"></i><b>5.2</b> 予測へのアクセス</a></li>
<li class="chapter" data-level="5.3" data-path="-1.html"><a href="-1.html#task"><i class="fa fa-check"></i><b>5.3</b> task引数を通じてデータを渡した例の結果</a></li>
<li class="chapter" data-level="5.4" data-path="-1.html"><a href="-1.html#newdata"><i class="fa fa-check"></i><b>5.4</b> newdata引数を通じてデータを渡した場合の結果</a></li>
<li class="chapter" data-level="5.5" data-path="-1.html"><a href="-1.html#-"><i class="fa fa-check"></i><b>5.5</b> 回帰: 標準誤差を取得する</a></li>
<li class="chapter" data-level="5.6" data-path="-1.html"><a href="-1.html#-"><i class="fa fa-check"></i><b>5.6</b> 分類とクラスタリング: 確率を取得する</a></li>
<li class="chapter" data-level="5.7" data-path="-1.html"><a href="-1.html#-"><i class="fa fa-check"></i><b>5.7</b> 分類: 混同行列を取得する</a></li>
<li class="chapter" data-level="5.8" data-path="-1.html"><a href="-1.html#-"><i class="fa fa-check"></i><b>5.8</b> 分類: 決定閾値の調整</a></li>
<li class="chapter" data-level="5.9" data-path="-1.html"><a href="-1.html#section-5.9"><i class="fa fa-check"></i><b>5.9</b> 学習器の作成と訓練。タスクは用意されているものを使う。</a></li>
<li class="chapter" data-level="5.10" data-path="-1.html"><a href="-1.html#positive"><i class="fa fa-check"></i><b>5.10</b> positiveクラスのラベルを確認する</a></li>
<li class="chapter" data-level="5.11" data-path="-1.html"><a href="-1.html#section-5.11"><i class="fa fa-check"></i><b>5.11</b> デフォルトの閾値で予測する</a></li>
<li class="chapter" data-level="5.12" data-path="-1.html"><a href="-1.html#positive"><i class="fa fa-check"></i><b>5.12</b> positiveクラスに分類する閾値を変更する</a></li>
<li class="chapter" data-level="5.13" data-path="-1.html"><a href="-1.html#-"><i class="fa fa-check"></i><b>5.13</b> 閾値の変更 大きな値を指定するほど予測されにくくなる</a></li>
<li class="chapter" data-level="5.14" data-path="-1.html"><a href="-1.html#section-5.14"><i class="fa fa-check"></i><b>5.14</b> 予測の可視化</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="section-6.html"><a href="section-6.html"><i class="fa fa-check"></i><b>6</b> データの前処理</a><ul>
<li class="chapter" data-level="6.1" data-path="section-6.html"><a href="section-6.html#section-6.1"><i class="fa fa-check"></i><b>6.1</b> 前処理と学習器を融合する</a></li>
<li class="chapter" data-level="6.2" data-path="section-6.html"><a href="section-6.html#makepreprocwrappercaret"><i class="fa fa-check"></i><b>6.2</b> <code>makePreprocWrapperCaret</code>を使用した前処理</a></li>
<li class="chapter" data-level="6.3" data-path="section-6.html"><a href="section-6.html#section-6.3"><i class="fa fa-check"></i><b>6.3</b> 前処理オプションと学習器パラメータの連結チューニング</a></li>
<li class="chapter" data-level="6.4" data-path="section-6.html"><a href="section-6.html#section-6.4"><i class="fa fa-check"></i><b>6.4</b> 独自の前処理ラッパーを書く</a><ul>
<li class="chapter" data-level="6.4.1" data-path="section-6.html"><a href="section-6.html#section-6.4.1"><i class="fa fa-check"></i><b>6.4.1</b> 訓練関数の指定</a></li>
<li class="chapter" data-level="6.4.2" data-path="section-6.html"><a href="section-6.html#section-6.4.2"><i class="fa fa-check"></i><b>6.4.2</b> 予測関数の指定</a></li>
<li class="chapter" data-level="6.4.3" data-path="section-6.html"><a href="section-6.html#section-6.4.3"><i class="fa fa-check"></i><b>6.4.3</b> 前処理ラッパーの作成</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="section-6.html"><a href="section-6.html#section-6.5"><i class="fa fa-check"></i><b>6.5</b> スケーリングあり(上で前処理を指定した)</a></li>
<li class="chapter" data-level="6.6" data-path="section-6.html"><a href="section-6.html#section-6.6"><i class="fa fa-check"></i><b>6.6</b> 前処理無しの学習器を再度作る</a><ul>
<li class="chapter" data-level="6.6.1" data-path="section-6.html"><a href="section-6.html#section-6.6.1"><i class="fa fa-check"></i><b>6.6.1</b> 前処理と学習器のパラメータを連結してチューニングする</a></li>
<li class="chapter" data-level="6.6.2" data-path="section-6.html"><a href="section-6.html#section-6.6.2"><i class="fa fa-check"></i><b>6.6.2</b> 前処理ラッパー関数</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="section-7.html"><a href="section-7.html"><i class="fa fa-check"></i><b>7</b> 学習器の性能を評価する</a><ul>
<li class="chapter" data-level="7.1" data-path="section-7.html"><a href="section-7.html#section-7.1"><i class="fa fa-check"></i><b>7.1</b> 利用可能な性能指標</a></li>
<li class="chapter" data-level="7.2" data-path="section-7.html"><a href="section-7.html#section-7.2"><i class="fa fa-check"></i><b>7.2</b> 指標の一覧</a></li>
<li class="chapter" data-level="7.3" data-path="section-7.html"><a href="section-7.html#section-7.3"><i class="fa fa-check"></i><b>7.3</b> 多クラス問題に対する分類指標</a></li>
<li class="chapter" data-level="7.4" data-path="section-7.html"><a href="section-7.html#iris.task"><i class="fa fa-check"></i><b>7.4</b> iris.taskに対する分類指標</a></li>
<li class="chapter" data-level="7.5" data-path="section-7.html"><a href="section-7.html#iris.task"><i class="fa fa-check"></i><b>7.5</b> iris.taskのデフォルト指標</a></li>
<li class="chapter" data-level="7.6" data-path="section-7.html"><a href="section-7.html#section-7.6"><i class="fa fa-check"></i><b>7.6</b> 回帰のデフォルト指標</a></li>
<li class="chapter" data-level="7.7" data-path="section-7.html"><a href="section-7.html#section-7.7"><i class="fa fa-check"></i><b>7.7</b> 性能指標を計算する</a></li>
<li class="chapter" data-level="7.8" data-path="section-7.html"><a href="section-7.html#section-7.8"><i class="fa fa-check"></i><b>7.8</b> 指標計算に必要な情報</a></li>
<li class="chapter" data-level="7.9" data-path="section-7.html"><a href="section-7.html#section-7.9"><i class="fa fa-check"></i><b>7.9</b> 性能指標へのアクセス</a></li>
<li class="chapter" data-level="7.10" data-path="section-7.html"><a href="section-7.html#section-7.10"><i class="fa fa-check"></i><b>7.10</b> 2クラス分類</a><ul>
<li class="chapter" data-level="7.10.1" data-path="section-7.html"><a href="section-7.html#section-7.10.1"><i class="fa fa-check"></i><b>7.10.1</b> 性能と閾値の関係をプロットする</a></li>
<li class="chapter" data-level="7.10.2" data-path="section-7.html"><a href="section-7.html#roc"><i class="fa fa-check"></i><b>7.10.2</b> ROC</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="section-8.html"><a href="section-8.html"><i class="fa fa-check"></i><b>8</b> リサンプリング</a><ul>
<li class="chapter" data-level="8.1" data-path="section-8.html"><a href="section-8.html#section-8.1"><i class="fa fa-check"></i><b>8.1</b> リサンプリング手法を決める</a></li>
<li class="chapter" data-level="8.2" data-path="section-8.html"><a href="section-8.html#section-8.2"><i class="fa fa-check"></i><b>8.2</b> リサンプリングを実行する</a></li>
<li class="chapter" data-level="8.3" data-path="section-8.html"><a href="section-8.html#section-8.3"><i class="fa fa-check"></i><b>8.3</b> 中身をざっと確認</a></li>
<li class="chapter" data-level="8.4" data-path="section-8.html"><a href="section-8.html#section-8.4"><i class="fa fa-check"></i><b>8.4</b> 各テストセットの性能指標</a></li>
<li class="chapter" data-level="8.5" data-path="section-8.html"><a href="section-8.html#section-8.5"><i class="fa fa-check"></i><b>8.5</b> 集約後の性能指標</a></li>
<li class="chapter" data-level="8.6" data-path="section-8.html"><a href="section-8.html#section-8.6"><i class="fa fa-check"></i><b>8.6</b> リサンプル結果へのアクセス</a><ul>
<li class="chapter" data-level="8.6.1" data-path="section-8.html"><a href="section-8.html#section-8.6.1"><i class="fa fa-check"></i><b>8.6.1</b> 予測値</a></li>
<li class="chapter" data-level="8.6.2" data-path="section-8.html"><a href="section-8.html#section-8.6.2"><i class="fa fa-check"></i><b>8.6.2</b> 訓練済みモデルの抽出</a></li>
</ul></li>
<li class="chapter" data-level="8.7" data-path="section-8.html"><a href="section-8.html#section-8.7"><i class="fa fa-check"></i><b>8.7</b> 3分割クロスバリデーション</a><ul>
<li class="chapter" data-level="8.7.1" data-path="section-8.html"><a href="section-8.html#section-8.7.1"><i class="fa fa-check"></i><b>8.7.1</b> 他の抽出方法</a></li>
</ul></li>
<li class="chapter" data-level="8.8" data-path="section-8.html"><a href="section-8.html#section-8.8"><i class="fa fa-check"></i><b>8.8</b> 階層化とブロック化</a><ul>
<li class="chapter" data-level="8.8.1" data-path="section-8.html"><a href="section-8.html#section-8.8.1"><i class="fa fa-check"></i><b>8.8.1</b> 目的変数の階層化</a></li>
<li class="chapter" data-level="8.8.2" data-path="section-8.html"><a href="section-8.html#section-8.8.2"><i class="fa fa-check"></i><b>8.8.2</b> 説明変数の階層化</a></li>
<li class="chapter" data-level="8.8.3" data-path="section-8.html"><a href="section-8.html#section-8.8.3"><i class="fa fa-check"></i><b>8.8.3</b> ブロック化</a></li>
</ul></li>
<li class="chapter" data-level="8.9" data-path="section-8.html"><a href="section-8.html#305"><i class="fa fa-check"></i><b>8.9</b> それぞれ30の観測値からなる5つのブロックを指定する例</a></li>
<li class="chapter" data-level="8.10" data-path="section-8.html"><a href="section-8.html#section-8.10"><i class="fa fa-check"></i><b>8.10</b> リサンプリングの詳細とリサンプルのインスタンス</a></li>
<li class="chapter" data-level="8.11" data-path="-1.html"><a href="-1.html#task"><i class="fa fa-check"></i><b>8.11</b> taskに基づくリサンプルインスタンスの生成</a></li>
<li class="chapter" data-level="8.12" data-path="section-8.html"><a href="section-8.html#section-8.12"><i class="fa fa-check"></i><b>8.12</b> データセットのサイズを指定してリサンプルインスタンスを生成する例</a></li>
<li class="chapter" data-level="8.13" data-path="section-8.html"><a href="section-8.html#2"><i class="fa fa-check"></i><b>8.13</b> 同じインスタンスを使い、2種類の学習器で性能指標を計算する</a></li>
<li class="chapter" data-level="8.14" data-path="section-8.html"><a href="section-8.html#section-8.14"><i class="fa fa-check"></i><b>8.14</b> 性能指標の集約</a></li>
<li class="chapter" data-level="8.15" data-path="section-8.html"><a href="section-8.html#section-8.15"><i class="fa fa-check"></i><b>8.15</b> 一般的な集約手法</a></li>
<li class="chapter" data-level="8.16" data-path="section-8.html"><a href="section-8.html#section-8.16"><i class="fa fa-check"></i><b>8.16</b> 具体的な計算方法</a></li>
<li class="chapter" data-level="8.17" data-path="section-8.html"><a href="section-8.html#rmse"><i class="fa fa-check"></i><b>8.17</b> rmseの場合</a></li>
<li class="chapter" data-level="8.18" data-path="section-8.html"><a href="section-8.html#test.rmse"><i class="fa fa-check"></i><b>8.18</b> test.rmseの具体的な計算方法</a><ul>
<li class="chapter" data-level="8.18.1" data-path="-1.html"><a href="-1.html#-"><i class="fa fa-check"></i><b>8.18.1</b> 例: 一つの指標に複数の集約方法</a></li>
<li class="chapter" data-level="8.18.2" data-path="-1.html"><a href="-1.html#-"><i class="fa fa-check"></i><b>8.18.2</b> 例: 訓練セットの誤差を計算する</a></li>
<li class="chapter" data-level="8.18.3" data-path="-1.html"><a href="-1.html#-"><i class="fa fa-check"></i><b>8.18.3</b> 例: ブートストラップ</a></li>
</ul></li>
<li class="chapter" data-level="8.19" data-path="section-8.html"><a href="section-8.html#section-8.19"><i class="fa fa-check"></i><b>8.19</b> ブートストラップをリサンプリング手法に選び、予測は訓練セットとテストセットの両方に行う</a></li>
<li class="chapter" data-level="8.20" data-path="section-8.html"><a href="section-8.html#b632b632"><i class="fa fa-check"></i><b>8.20</b> b632およびb632+専用の集計手法を設定する</a></li>
<li class="chapter" data-level="8.21" data-path="section-8.html"><a href="section-8.html#section-8.21"><i class="fa fa-check"></i><b>8.21</b> 便利な関数</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="section-9.html"><a href="section-9.html"><i class="fa fa-check"></i><b>9</b> ハイパーパラメータのチューニング</a><ul>
<li class="chapter" data-level="9.1" data-path="section-9.html"><a href="section-9.html#section-9.1"><i class="fa fa-check"></i><b>9.1</b> パラメータ探索空間の指定</a></li>
<li class="chapter" data-level="9.2" data-path="section-9.html"><a href="section-9.html#section-9.2"><i class="fa fa-check"></i><b>9.2</b> 最適化アルゴリズムの指定</a></li>
<li class="chapter" data-level="9.3" data-path="section-9.html"><a href="section-9.html#section-9.3"><i class="fa fa-check"></i><b>9.3</b> チューニングの実行</a></li>
<li class="chapter" data-level="9.4" data-path="section-9.html"><a href="section-9.html#section-9.4"><i class="fa fa-check"></i><b>9.4</b> チューニング結果へのアクセス</a></li>
<li class="chapter" data-level="9.5" data-path="section-9.html"><a href="section-9.html#section-9.5"><i class="fa fa-check"></i><b>9.5</b> ハイパーパラメータチューニングの影響を調査する</a></li>
<li class="chapter" data-level="9.6" data-path="section-9.html"><a href="section-9.html#section-9.6"><i class="fa fa-check"></i><b>9.6</b> その他いろいろ</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="section-10.html"><a href="section-10.html"><i class="fa fa-check"></i><b>10</b> ベンチマーク試験</a><ul>
<li class="chapter" data-level="10.1" data-path="section-10.html"><a href="section-10.html#section-10.1"><i class="fa fa-check"></i><b>10.1</b> ベンチマーク試験の実施</a><ul>
<li class="chapter" data-level="10.1.1" data-path="section-10.html"><a href="section-10.html#section-10.1.1"><i class="fa fa-check"></i><b>10.1.1</b> 実験を再現可能にする</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="section-10.html"><a href="section-10.html#section-10.2"><i class="fa fa-check"></i><b>10.2</b> ベンチマーク結果へのアクセス</a><ul>
<li class="chapter" data-level="10.2.1" data-path="section-10.html"><a href="section-10.html#section-10.2.1"><i class="fa fa-check"></i><b>10.2.1</b> 学習器の性能</a></li>
<li class="chapter" data-level="10.2.2" data-path="section-10.html"><a href="section-10.html#-2"><i class="fa fa-check"></i><b>10.2.2</b> 予測</a></li>
<li class="chapter" data-level="10.2.3" data-path="section-10.html"><a href="section-10.html#id-1"><i class="fa fa-check"></i><b>10.2.3</b> ID</a></li>
<li class="chapter" data-level="10.2.4" data-path="section-10.html"><a href="section-10.html#section-10.2.4"><i class="fa fa-check"></i><b>10.2.4</b> フィット済みモデル</a></li>
<li class="chapter" data-level="10.2.5" data-path="section-10.html"><a href="section-10.html#section-10.2.5"><i class="fa fa-check"></i><b>10.2.5</b> 学習器と性能指標</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="section-10.html"><a href="section-10.html#section-10.3"><i class="fa fa-check"></i><b>10.3</b> ベンチマーク結果のマージ</a></li>
<li class="chapter" data-level="10.4" data-path="section-10.html"><a href="section-10.html#section-10.4"><i class="fa fa-check"></i><b>10.4</b> ベンチマークの分析と可視化</a><ul>
<li class="chapter" data-level="10.4.1" data-path="section-10.html"><a href="section-10.html#section-10.4.1"><i class="fa fa-check"></i><b>10.4.1</b> 例：線形判別分析と分類木、ランダムフォレストの比較</a></li>
<li class="chapter" data-level="10.4.2" data-path="section-10.html"><a href="section-10.html#section-10.4.2"><i class="fa fa-check"></i><b>10.4.2</b> 可視化</a></li>
<li class="chapter" data-level="10.4.3" data-path="section-10.html"><a href="section-10.html#section-10.4.3"><i class="fa fa-check"></i><b>10.4.3</b> 集約結果の可視化</a></li>
<li class="chapter" data-level="10.4.4" data-path="section-10.html"><a href="section-10.html#section-10.4.4"><i class="fa fa-check"></i><b>10.4.4</b> 順位の計算と可視化</a></li>
<li class="chapter" data-level="10.4.5" data-path="section-10.html"><a href="section-10.html#section-10.4.5"><i class="fa fa-check"></i><b>10.4.5</b> 仮説検定で学習器を比較する</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">mlrパッケージチュートリアル</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="section-10" class="section level1">
<h1><span class="header-section-number">Section 10</span> ベンチマーク試験</h1>
<p>ベンチマーク試験では、1つ、あるいは複数の性能指標に基いてアルゴリズムを比較するために、異なる学習手法を1つあるいは複数のデータセットに適用する。</p>
<p><code>mlr</code>では<code>benchmark</code>関数に学習器とタスクをリストで渡すことでベンチマーク試験を実施できる。<code>benchmark</code>は通常、学習器とタスクの対に対してリサンプリングを実行する。タスクと性能指標の組み合わせに対してどのようなリサンプリング手法を適用するかは選択することができる。</p>
<div id="section-10.1" class="section level2">
<h2><span class="header-section-number">10.1</span> ベンチマーク試験の実施</h2>
<p>小さな例から始めよう。線形判別分析(lda)と分類木(rpart)を<code>sonar.task</code>に適用する。リサンプリング手法はホールドアウト法を用いる。</p>
<p>以下の例では<code>ResampleDesc</code>オブジェクトを作成する。各リサンプリングのインスタンスは<code>benchmark</code>関数によって自動的に作成される。インスタンス化はタスクに対して1度だけ実行される。つまり、全ての学習器は全くおなじ訓練セット、テストセットを用いることになる。なお、明示的に<code>ResampleInstance</code>を渡しても良い。</p>
<p>もし、データセットの作成を無作為ではなく任意に行いたければ、<code>makeFixedHoldoutinstance</code>を使うと良いだろう。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">lrns =<span class="st"> </span><span class="kw">list</span>(<span class="kw">makeLearner</span>(<span class="st">&quot;classif.lda&quot;</span>), <span class="kw">makeLearner</span>(<span class="st">&quot;classif.rpart&quot;</span>))

rdesc =<span class="st"> </span><span class="kw">makeResampleDesc</span>(<span class="st">&quot;Holdout&quot;</span>)

bmr =<span class="st"> </span><span class="kw">benchmark</span>(lrns, sonar.task, rdesc)</code></pre></div>
<pre><code>## Task: Sonar-example, Learner: classif.lda</code></pre>
<pre><code>## [Resample] holdout iter 1: mmce.test.mean=0.357
## [Resample] Aggr. Result: mmce.test.mean=0.357
## Task: Sonar-example, Learner: classif.rpart
## [Resample] holdout iter 1: mmce.test.mean= 0.3
## [Resample] Aggr. Result: mmce.test.mean= 0.3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">bmr</code></pre></div>
<pre><code>##         task.id    learner.id mmce.test.mean
## 1 Sonar-example   classif.lda      0.3571429
## 2 Sonar-example classif.rpart      0.3000000</code></pre>
<p>もし<code>makeLearner</code>に学習器の種類以外の引数を指定するつもりがなければ、明示的に<code>makeLearner</code>を呼び出さずに単に学習器の名前を指定しても良い。上記の例は次のように書き換えることができる。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## 学習器の名前だけをベクトルで指定しても良い
lrns =<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;classif.lda&quot;</span>, <span class="st">&quot;classif.rpart&quot;</span>)

## 学習器の名前とLearnerオブジェクトを混ぜたリストでも良い
lrns =<span class="st"> </span><span class="kw">list</span>(<span class="kw">makeLearner</span>(<span class="st">&quot;classif.lda&quot;</span>, <span class="dt">predict.type =</span> <span class="st">&quot;prob&quot;</span>), <span class="st">&quot;classif.rpart&quot;</span>)

bmr =<span class="st"> </span><span class="kw">benchmark</span>(lrns, sonar.task, rdesc)</code></pre></div>
<pre><code>## Task: Sonar-example, Learner: classif.lda</code></pre>
<pre><code>## [Resample] holdout iter 1: mmce.test.mean=0.229
## [Resample] Aggr. Result: mmce.test.mean=0.229
## Task: Sonar-example, Learner: classif.rpart
## [Resample] holdout iter 1: mmce.test.mean=0.229
## [Resample] Aggr. Result: mmce.test.mean=0.229</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">bmr</code></pre></div>
<pre><code>##         task.id    learner.id mmce.test.mean
## 1 Sonar-example   classif.lda      0.2285714
## 2 Sonar-example classif.rpart      0.2285714</code></pre>
<p><code>print</code>の結果は各行がタスクと学習器の1つの組合せに対応している。ここでは分類のデフォルトの指標である平均誤分類率が示されている。</p>
<p><code>bmr</code>は<code>BenchmarcResult</code>クラスのオブジェクトである。基本的には、これは<code>ResampleResult</code>クラスのオブジェクトのリストのリストを含んでおり、最初のリストはタスク、その中のリストは学習器に対応した並びになっている。</p>
<div id="section-10.1.1" class="section level3">
<h3><span class="header-section-number">10.1.1</span> 実験を再現可能にする</h3>
<p>一般的にいって、実験は再現可能であることが望ましい。<code>mlr</code>は<code>set.seed</code>関数の設定に従うので、スクリプト実行前に<code>set.seed</code>によって乱数種を固定しておけば再現性が確保できる。</p>
<p>もし並列計算を使用する場合は、ユースケースに合わせて<code>set.seed</code>の呼び出し方を調整する必要がある。例えば、<code>set.seed(123, &quot;L'Ecuyer&quot;)</code>と指定すると子プロセス単位で再現性が確保できる。mcapplyの例(<a href="https://www.rdocumentation.org/packages/parallel/versions/3.4.1/topics/mclapply">mclapply function | R Documentation</a>)を見ると並列計算と再現性に関するもう少し詳しい情報が得られるだろう(訳注:こちらのほうが良いかも？<a href="https://rforge.net/doc/packages/multicore/mclapply.html">R: Parallel version of lapply</a>)。</p>
</div>
</div>
<div id="section-10.2" class="section level2">
<h2><span class="header-section-number">10.2</span> ベンチマーク結果へのアクセス</h2>
<p><code>mlr</code>は<code>getBMR&lt;抽出対象&gt;</code>という名前のアクセサ関数を幾つか用意している。これにより、さらなる分析のために情報を探索することができる。これには検討中の学習アルゴリズムに関するパフォーマンスや予測などが含まれる。</p>
<div id="section-10.2.1" class="section level3">
<h3><span class="header-section-number">10.2.1</span> 学習器の性能</h3>
<p>先程のベンチマーク試験の結果を見てみよう。<code>getBMRPerformances</code>は個々のリサンプリング毎の性能指標を返し、<code>getMBRAggrPerformances</code>は性能指標の集約値を返す。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">getBMRPerformances</span>(bmr)</code></pre></div>
<pre><code>## $`Sonar-example`
## $`Sonar-example`$classif.lda
##   iter      mmce
## 1    1 0.2285714
## 
## $`Sonar-example`$classif.rpart
##   iter      mmce
## 1    1 0.2285714</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">getBMRAggrPerformances</span>(bmr)</code></pre></div>
<pre><code>## $`Sonar-example`
## $`Sonar-example`$classif.lda
## mmce.test.mean 
##      0.2285714 
## 
## $`Sonar-example`$classif.rpart
## mmce.test.mean 
##      0.2285714</code></pre>
<p>今回の例ではリサンプリング手法にホールドアウト法を選んだので、リサンプリングは1回しか行っていない。そのため、個々のリサンプリング結果に基づく性能指標と集約値はどちらも同じ表示結果になっている。</p>
<p>デフォルトでは、ほぼすべてのゲッター関数ネストされたリストを返す。リストの最初のレベルはタスクで分類されており、二番目のレベルは学習器での分類になる。学習器またはタスクが1つしかない場合は、<code>drop = TRUE</code>を指定するとフラットなリストを得ることもできる。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">getBMRPerformances</span>(bmr, <span class="dt">drop =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>## $classif.lda
##   iter      mmce
## 1    1 0.2285714
## 
## $classif.rpart
##   iter      mmce
## 1    1 0.2285714</code></pre>
<p>大抵の場合はデータフレームの方が便利だろう。<code>as.df = TRUE</code>を指定すると結果をデータフレームに変換できる。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">getBMRPerformances</span>(bmr, <span class="dt">as.df =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>##         task.id    learner.id iter      mmce
## 1 Sonar-example   classif.lda    1 0.2285714
## 2 Sonar-example classif.rpart    1 0.2285714</code></pre>
</div>
<div id="-2" class="section level3">
<h3><span class="header-section-number">10.2.2</span> 予測</h3>
<p>デフォルトでは、<code>BenchmarkResult</code>は学習器の予測結果も含んでいる。もし、メモリ節約などの目的でこれを止めさせたければ<code>keep.pred = FALSE</code>を<code>benchmark</code>関数に指定すれば良い。</p>
<p>予測へのアクセスは<code>getBMRPredictions</code>関数を使う。デフォルトでは、<code>ResamplePrediction</code>オブジェクトのネストされたリストが返ってくる。性能指標の場合と同様に、ここでも<code>drop</code>及び<code>as.df</code>引数を使うことができる。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">getBMRPredictions</span>(bmr)</code></pre></div>
<pre><code>## $`Sonar-example`
## $`Sonar-example`$classif.lda
## Resampled Prediction for:
## Resample description: holdout with 0.67 split rate.
## Predict: test
## Stratification: FALSE
## predict.type: prob
## threshold: M=0.50,R=0.50
## time (mean): 0.01
##    id truth    prob.M       prob.R response iter  set
## 1 204     M 0.9999727 2.734760e-05        M    1 test
## 2 182     M 0.9999940 6.035339e-06        M    1 test
## 3 186     M 0.9999445 5.551666e-05        M    1 test
## 4 175     M 0.9999958 4.206619e-06        M    1 test
## 5  98     M 0.9994891 5.108557e-04        M    1 test
## 6 154     M 0.2163397 7.836603e-01        R    1 test
## ... (70 rows, 7 cols)
## 
## 
## $`Sonar-example`$classif.rpart
## Resampled Prediction for:
## Resample description: holdout with 0.67 split rate.
## Predict: test
## Stratification: FALSE
## predict.type: response
## threshold: 
## time (mean): 0.01
##    id truth response iter  set
## 1 204     M        M    1 test
## 2 182     M        M    1 test
## 3 186     M        M    1 test
## 4 175     M        M    1 test
## 5  98     M        M    1 test
## 6 154     M        R    1 test
## ... (70 rows, 5 cols)</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(<span class="kw">getBMRPredictions</span>(bmr, <span class="dt">as.df =</span> <span class="ot">TRUE</span>))</code></pre></div>
<pre><code>##         task.id  learner.id  id truth    prob.M       prob.R response iter
## 1 Sonar-example classif.lda 204     M 0.9999727 2.734760e-05        M    1
## 2 Sonar-example classif.lda 182     M 0.9999940 6.035339e-06        M    1
## 3 Sonar-example classif.lda 186     M 0.9999445 5.551666e-05        M    1
## 4 Sonar-example classif.lda 175     M 0.9999958 4.206619e-06        M    1
## 5 Sonar-example classif.lda  98     M 0.9994891 5.108557e-04        M    1
## 6 Sonar-example classif.lda 154     M 0.2163397 7.836603e-01        R    1
##    set
## 1 test
## 2 test
## 3 test
## 4 test
## 5 test
## 6 test</code></pre>
<p>IDを通じて特定の学習器やタスクの結果にアクセスすることもできる。多くのゲッター関数はIDを指定するための<code>learner.ids</code>引数と<code>task.ids</code>引数が用意されている。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(<span class="kw">getBMRPredictions</span>(bmr, <span class="dt">learner.ids =</span> <span class="st">&quot;classif.rpart&quot;</span>, <span class="dt">as.df =</span> <span class="ot">TRUE</span>))</code></pre></div>
<pre><code>##         task.id    learner.id  id truth response iter  set
## 1 Sonar-example classif.rpart 204     M        M    1 test
## 2 Sonar-example classif.rpart 182     M        M    1 test
## 3 Sonar-example classif.rpart 186     M        M    1 test
## 4 Sonar-example classif.rpart 175     M        M    1 test
## 5 Sonar-example classif.rpart  98     M        M    1 test
## 6 Sonar-example classif.rpart 154     M        R    1 test</code></pre>
<p>デフォルトのIDが嫌なら、<code>makeLearner</code>や<code>make*Task</code>関数の<code>id</code>引数を通じて設定できる。さらに、学習器のIDを簡単に変更するための関数として<code>setLearnerId</code>関数も用意されている。</p>
</div>
<div id="id-1" class="section level3">
<h3><span class="header-section-number">10.2.3</span> ID</h3>
<p>ベンチマーク試験における学習器、タスク、性能指標のIDは、以下のように取得できる。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">getBMRTaskIds</span>(bmr)</code></pre></div>
<pre><code>## [1] &quot;Sonar-example&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">getBMRLearnerIds</span>(bmr)</code></pre></div>
<pre><code>## [1] &quot;classif.lda&quot;   &quot;classif.rpart&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">getBMRMeasureIds</span>(bmr)</code></pre></div>
<pre><code>## [1] &quot;mmce&quot;</code></pre>
</div>
<div id="section-10.2.4" class="section level3">
<h3><span class="header-section-number">10.2.4</span> フィット済みモデル</h3>
<p>デフォルトでは<code>BenchmarkResult</code>オブジェクトはフィット済みモデルも含んでいる。これは、<code>benchmark</code>関数を呼び出す際に<code>models = FALSE</code>を指定することで抑制できる。フィット済みモデルは<code>getBMRModels</code>関数を使うことで確認できる。この関数が返すのは(おそらくネストされた)<code>WrappedModel</code>オブジェクトのリストである。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">getBMRModels</span>(bmr)</code></pre></div>
<pre><code>## $`Sonar-example`
## $`Sonar-example`$classif.lda
## $`Sonar-example`$classif.lda[[1]]
## Model for learner.id=classif.lda; learner.class=classif.lda
## Trained on: task.id = Sonar-example; obs = 138; features = 60
## Hyperparameters: 
## 
## 
## $`Sonar-example`$classif.rpart
## $`Sonar-example`$classif.rpart[[1]]
## Model for learner.id=classif.rpart; learner.class=classif.rpart
## Trained on: task.id = Sonar-example; obs = 138; features = 60
## Hyperparameters: xval=0</code></pre>
</div>
<div id="section-10.2.5" class="section level3">
<h3><span class="header-section-number">10.2.5</span> 学習器と性能指標</h3>
<p>使用された学習器は<code>getBMRLearners</code>で、性能指標は<code>getBMRMeasures</code>でそれぞれ抽出できる。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">getBMRLearners</span>(bmr)</code></pre></div>
<pre><code>## $classif.lda
## Learner classif.lda from package MASS
## Type: classif
## Name: Linear Discriminant Analysis; Short name: lda
## Class: classif.lda
## Properties: twoclass,multiclass,numerics,factors,prob
## Predict-Type: prob
## Hyperparameters: 
## 
## 
## $classif.rpart
## Learner classif.rpart from package rpart
## Type: classif
## Name: Decision Tree; Short name: rpart
## Class: classif.rpart
## Properties: twoclass,multiclass,missings,numerics,factors,ordered,prob,weights,featimp
## Predict-Type: response
## Hyperparameters: xval=0</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">getBMRMeasures</span>(bmr)</code></pre></div>
<pre><code>## [[1]]
## Name: Mean misclassification error
## Performance measure: mmce
## Properties: classif,classif.multi,req.pred,req.truth
## Minimize: TRUE
## Best: 0; Worst: 1
## Aggregated by: test.mean
## Note: Defined as: mean(response != truth)</code></pre>
</div>
</div>
<div id="section-10.3" class="section level2">
<h2><span class="header-section-number">10.3</span> ベンチマーク結果のマージ</h2>
<p>ベンチマーク試験が終わった後で、他の学習器やタスクを追加したくなったらどうすればよいだろうか。このような場合は、<code>mergeBenchmarkResults</code>関数を使えば、複数の<code>BenchmarkResutl</code>オブジェクトをマージすることができる。</p>
<p>先程行った線形判別分析と決定木のベンチマーク試験結果に対し、ランダムフォレストと二次判別分析の結果を追加してみよう。</p>
<p>まず、ランダムフォレストと二次判別分析のベンチマーク試験を行う。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">lrns2 =<span class="st"> </span><span class="kw">list</span>(<span class="kw">makeLearner</span>(<span class="st">&quot;classif.randomForest&quot;</span>), <span class="kw">makeLearner</span>(<span class="st">&quot;classif.qda&quot;</span>))
bmr2 =<span class="st"> </span><span class="kw">benchmark</span>(lrns2, sonar.task, rdesc, <span class="dt">show.info =</span> <span class="ot">FALSE</span>)
bmr2</code></pre></div>
<pre><code>##         task.id           learner.id mmce.test.mean
## 1 Sonar-example classif.randomForest      0.2285714
## 2 Sonar-example          classif.qda      0.3714286</code></pre>
<p>次に、<code>bmr</code>と<code>bmr2</code>をマージする。<code>BenchmarkResult</code>オブジェクトはリストで渡す。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mergeBenchmarkResults</span>(<span class="kw">list</span>(bmr, bmr2))</code></pre></div>
<pre><code>##         task.id           learner.id mmce.test.mean
## 1 Sonar-example          classif.lda      0.2285714
## 2 Sonar-example        classif.rpart      0.2285714
## 3 Sonar-example classif.randomForest      0.2285714
## 4 Sonar-example          classif.qda      0.3714286</code></pre>
<p>上記の例ではリサンプルdescriptionを<code>benchmark</code>関数に指定していることに注意してもらいたい。つまり、<code>lda</code>と<code>rpart</code>は<code>randamForest</code>および<code>qda</code>とは異なる訓練/テストセットを用いて評価された可能性が高い。</p>
<p>異なる訓練/テストセットを用いて評価を行うと、学習器間の正確な性能比較が難しくなる。もし、他の学習器を使った試験を後から追加する見込みがあるのなら、最初から<code>ResampleInstances</code>を使用したほうが良い。リサンプルをインスタンス化しておけば、同じ訓練/テストセットを後の試験でも使用することができるからだ。</p>
<p>あるいは、<code>BenchmarkResult</code>オブジェクトから<code>ResampleInstance</code>を抽出し、これを他の試験に使用しても良い。例を示そう。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># インスタンスの抽出</span>
rin =<span class="st"> </span><span class="kw">getBMRPredictions</span>(bmr)[[<span class="dv">1</span>]][[<span class="dv">1</span>]]<span class="op">$</span>instance

<span class="co"># インスタンスを用いてベンチマーク試験を行う</span>
bmr3 =<span class="st"> </span><span class="kw">benchmark</span>(lrns2, sonar.task, rin, <span class="dt">show.info =</span> <span class="ot">FALSE</span>)

<span class="co"># 結果をマージする</span>
<span class="kw">mergeBenchmarkResults</span>(<span class="kw">list</span>(bmr, bmr3))</code></pre></div>
<pre><code>##         task.id           learner.id mmce.test.mean
## 1 Sonar-example          classif.lda      0.2285714
## 2 Sonar-example        classif.rpart      0.2285714
## 3 Sonar-example classif.randomForest      0.2000000
## 4 Sonar-example          classif.qda      0.2714286</code></pre>
</div>
<div id="section-10.4" class="section level2">
<h2><span class="header-section-number">10.4</span> ベンチマークの分析と可視化</h2>
<p><code>mlr</code>はベンチマーク試験を分析する機能も備えている。これには、可視化、アルゴリズムの順位付け、パフォーマンスの差に対する仮説検定が含まれる。</p>
<p>今回はこの機能を紹介するために、5つの分類タスクと3つの学習アルゴリズムを使用する、やや大きなベンチマーク試験を実施する。</p>
<div id="section-10.4.1" class="section level3">
<h3><span class="header-section-number">10.4.1</span> 例：線形判別分析と分類木、ランダムフォレストの比較</h3>
<p><strong>3つのアルゴリズム</strong>は線形判別分析、決定木、ランダムフォレストである。これらのデフォルトの学習器IDはやや長いので、以下の例ではもう少し短い別名を設定した。</p>
<p><strong>5つの分類タスク</strong>と言ったが、3つは既に紹介したものだ。これに加えて、<code>mlbench</code>パッケージに含まれるデータを<code>convertMLBenchObjToTask</code>関数でタスクに変換したものを用いる。</p>
<p>全てのタスクは10分割クロスバリデーションによりリサンプリングを行う。これは、一つのresample descriptionを<code>benchmark</code>関数に渡すことで行う。これにより、それぞれのタスクに対するリサンプリングのインスタンス化が自動的に実行される。この方法では、一つのタスク内で全ての学習器に対して同じインスタンスが使用されることになる。</p>
<p>タスクの数と同じ長さのリストでリサンプリング手法を指定すれば、それぞれのタスクに異なるリサンプリング手法を適用することもできる。この際渡すのはresample descriptionsでも良いし、インスタンスでも良い。</p>
<p>評価手法は平均誤分類率を主とするが、合わせてbalanced error rate(ber)と訓練時間(timetrain)も算出する。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## 学習器リストの作成
lrns =<span class="st"> </span><span class="kw">list</span>(
  <span class="kw">makeLearner</span>(<span class="st">&quot;classif.lda&quot;</span>, <span class="dt">id =</span> <span class="st">&quot;lda&quot;</span>),
  <span class="kw">makeLearner</span>(<span class="st">&quot;classif.rpart&quot;</span>, <span class="dt">id =</span> <span class="st">&quot;rpart&quot;</span>),
  <span class="kw">makeLearner</span>(<span class="st">&quot;classif.randomForest&quot;</span>, <span class="dt">id =</span> <span class="st">&quot;randomForest&quot;</span>)
)

## mlbenchパッケージから追加タスクを生成する
ring.task =<span class="st"> </span><span class="kw">convertMLBenchObjToTask</span>(<span class="st">&quot;mlbench.ringnorm&quot;</span>, <span class="dt">n =</span> <span class="dv">600</span>)</code></pre></div>
<pre><code>## Loading required package: mlbench</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">wave.task =<span class="st"> </span><span class="kw">convertMLBenchObjToTask</span>(<span class="st">&quot;mlbench.waveform&quot;</span>, <span class="dt">n =</span> <span class="dv">600</span>)

## タスクリストの作成
tasks =<span class="st"> </span><span class="kw">list</span>(iris.task, sonar.task, pid.task, ring.task, wave.task)
## リサンプリング手法の指定
rdesc =<span class="st"> </span><span class="kw">makeResampleDesc</span>(<span class="st">&quot;CV&quot;</span>, <span class="dt">iters =</span> <span class="dv">10</span>)
## 評価指標の指定
meas =<span class="st"> </span><span class="kw">list</span>(mmce, ber, timetrain)
## ベンチマーク試験の実行
bmr =<span class="st"> </span><span class="kw">benchmark</span>(lrns, tasks, rdesc, meas, <span class="dt">show.info =</span> <span class="ot">FALSE</span>)
bmr</code></pre></div>
<pre><code>##                        task.id   learner.id mmce.test.mean ber.test.mean
## 1                 iris-example          lda     0.02000000    0.01976190
## 2                 iris-example        rpart     0.06666667    0.06753968
## 3                 iris-example randomForest     0.04666667    0.04309524
## 4             mlbench.ringnorm          lda     0.36666667    0.36395437
## 5             mlbench.ringnorm        rpart     0.20166667    0.20460209
## 6             mlbench.ringnorm randomForest     0.05666667    0.05690448
## 7             mlbench.waveform          lda     0.18166667    0.17715252
## 8             mlbench.waveform        rpart     0.25666667    0.25913504
## 9             mlbench.waveform randomForest     0.15166667    0.15300366
## 10 PimaIndiansDiabetes-example          lda     0.23045113    0.28071415
## 11 PimaIndiansDiabetes-example        rpart     0.24092618    0.27530086
## 12 PimaIndiansDiabetes-example randomForest     0.22792208    0.26917379
## 13               Sonar-example          lda     0.25142857    0.24619214
## 14               Sonar-example        rpart     0.26952381    0.27825258
## 15               Sonar-example randomForest     0.15452381    0.15690712
##    timetrain.test.mean
## 1               0.0029
## 2               0.0040
## 3               0.0422
## 4               0.0080
## 5               0.0125
## 6               0.3909
## 7               0.0083
## 8               0.0113
## 9               0.4407
## 10              0.0182
## 11              0.0075
## 12              0.3959
## 13              0.0170
## 14              0.0145
## 15              0.2762</code></pre>
<p>iris-exampleとPimaIndiansDiabetes-exampleでは線形判別分析が優れいているが、他のタスクではランダムフォレストが良い成績を出しているようだ。一方、訓練時間を見るとランダムフォレストは他の学習器よりも長い時間がかかっている。</p>
<p>パフォーマンスの平均値から何らかの結論を言いたければ、値の変動も考慮に入れる必要がある。リサンプリングの繰り返し全体で値がどのように分布しているかも考慮できれば尚良い。</p>
<p>10分割クロスバリデーションにより、各タスクは10回評価されていることになるが、これは以下の様にして詳細を確認できる。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">perf =<span class="st"> </span><span class="kw">getBMRPerformances</span>(bmr, <span class="dt">as.df =</span> <span class="ot">TRUE</span>)
<span class="kw">head</span>(perf)</code></pre></div>
<pre><code>##        task.id learner.id iter       mmce        ber timetrain
## 1 iris-example        lda    1 0.00000000 0.00000000     0.003
## 2 iris-example        lda    2 0.00000000 0.00000000     0.003
## 3 iris-example        lda    3 0.00000000 0.00000000     0.003
## 4 iris-example        lda    4 0.06666667 0.08333333     0.003
## 5 iris-example        lda    5 0.06666667 0.06666667     0.003
## 6 iris-example        lda    6 0.00000000 0.00000000     0.003</code></pre>
<p>結果を詳しく確認すると、ランダムフォレストは全てのインスタンスで分類木より優れており、線形判別分析は時間の面でほとんどどの場合も優れている事が分かる。また、線形判別分析は時々ランダムフォレストより優れた結果を出している。このサイズの試験結果ならまだ「詳しく確認する」は可能であるが、これよりももっと大きなスケールのベンチマーク試験では、このような判断はずっと難しくなる。</p>
<p><code>mlr</code>には可視化と仮説検定の仕組みがあるので、より大きなスケールの試験に対してはそれを使おう。</p>
</div>
<div id="section-10.4.2" class="section level3">
<h3><span class="header-section-number">10.4.2</span> 可視化</h3>
<p>プロットには<code>ggplot2</code>パッケージが使用される。したがって、要素のリネームや配色変更などのカスタマイズは容易に行える。</p>
<div id="section-10.4.2.1" class="section level4">
<h4><span class="header-section-number">10.4.2.1</span> パフォーマンスの可視化</h4>
<p><code>plotBMRBoxplot</code>は箱ひげ図またはバイオリンプロットによって、リサンプリングの繰り返しの間に指標がどのような値をとったのかを可視化する。これはつまり<code>getBMRPerformances</code>の可視化である。</p>
<p>以下に箱ひげ図で<code>mmce</code>の分布を示す。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plotBMRBoxplots</span>(bmr, <span class="dt">measure =</span> mmce)</code></pre></div>
<p><img src="mlr_tutorial_ja_files/figure-html/unnamed-chunk-24-1.png" width="672" /></p>
<p>次にバイオリンプロットの例を示す。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># aes, theme, element_textをggplot2::なしで呼び出すためには</span>
<span class="co"># ライブラリのロードが必要</span>
<span class="kw">library</span>(ggplot2) 
<span class="kw">plotBMRBoxplots</span>(bmr, <span class="dt">measure =</span> ber, <span class="dt">style =</span> <span class="st">&quot;violin&quot;</span>,
                <span class="dt">pretty.names =</span> <span class="ot">FALSE</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">aes</span>(<span class="dt">color =</span> learner.id) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">strip.text.x =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">6</span>))</code></pre></div>
<p><img src="mlr_tutorial_ja_files/figure-html/unnamed-chunk-25-1.png" width="672" /></p>
<p>ここでは、指標として<code>ber</code>を使用するとともに、<code>learner.id</code>に基づく色の塗り分けも行っている。また、<code>theme</code>は各パネルのラベル(strip)のフォントサイズを調整している。</p>
<p><code>pretty.names=FALSE</code>は何かというと、性能指標や学習器のラベルとしてidを使ってくれという指定である。これを指定しなかったときにどのような名前が使われるかは、性能指標であれば<code>指標名$name</code>、学習器では<code>getBMRLEarnerShortName</code>で確認できる。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mmce<span class="op">$</span>name</code></pre></div>
<pre><code>## [1] &quot;Mean misclassification error&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">getBMRLearnerShortNames</span>(bmr)</code></pre></div>
<pre><code>## [1] &quot;lda&quot;   &quot;rpart&quot; &quot;rf&quot;</code></pre>
<p>プロットに関してよくある質問は、「パネルのラベルと学習器の名前はどうやったら変更できるのか」といったものだ。例えば、今見せた例で言えば、パネルのラベル名に含まれている<code>-example</code>や<code>mlbench.</code>を取り除いたり、学習機の名前を大文字の略称に変更したい、などの思ったのではないだろうか。現状、これを解決する一番簡単なやり方はfactorのlevelを書き換えてしまうことだ。例を示そう。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">plt =<span class="st"> </span><span class="kw">plotBMRBoxplots</span>(bmr, <span class="dt">measure =</span> mmce)
<span class="kw">levels</span>(plt<span class="op">$</span>data<span class="op">$</span>task.id) =<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Iris&quot;</span>, <span class="st">&quot;Ringnorm&quot;</span>, <span class="st">&quot;Waveform&quot;</span>, <span class="st">&quot;Diabetes&quot;</span>, <span class="st">&quot;Sonar&quot;</span>)
<span class="kw">levels</span>(plt<span class="op">$</span>data<span class="op">$</span>learner.id) =<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;LDA&quot;</span>, <span class="st">&quot;CART&quot;</span>, <span class="st">&quot;RF&quot;</span>)
plt</code></pre></div>
<p><img src="mlr_tutorial_ja_files/figure-html/unnamed-chunk-28-1.png" width="672" /></p>
</div>
</div>
<div id="section-10.4.3" class="section level3">
<h3><span class="header-section-number">10.4.3</span> 集約結果の可視化</h3>
<p>集約された性能指標(<code>getBMRAggrPerformances</code>で得られるもの)は、<code>plotBMRSummary</code>で可視化できる。このプロットでは各タスクの性能指標集約値が同一の線上に並べられる(注: ドットプロット)。標準では、<code>benchmark</code>で指定された最初の指標がプロット対象となる。今回の例では<code>mmce</code>だ。加えて、各ポイントには縦方向に若干の誤差が加えられる。これはデータポイントが重なった場合にも識別できるようにするためだ。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plotBMRSummary</span>(bmr)</code></pre></div>
<p><img src="mlr_tutorial_ja_files/figure-html/unnamed-chunk-29-1.png" width="672" /></p>
</div>
<div id="section-10.4.4" class="section level3">
<h3><span class="header-section-number">10.4.4</span> 順位の計算と可視化</h3>
<p>性能指標の値に加えて、順位のような相対指標があると新しい知見が得られる場合がある。</p>
<p><code>convertBMRToRankMatrix</code>関数は、集約された性能指標のひとつに基づいて順位を計算する。例として<code>mmce</code>に基づくランキングを求めてみよう。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">convertBMRToRankMatrix</span>(bmr)</code></pre></div>
<pre><code>##              iris-example mlbench.ringnorm mlbench.waveform
## lda                     1                3                2
## rpart                   3                2                3
## randomForest            2                1                1
##              PimaIndiansDiabetes-example Sonar-example
## lda                                    2             2
## rpart                                  3             3
## randomForest                           1             1</code></pre>
<p><strong>順位</strong>は最高のパフォーマンスを示した、つまり<code>mmce</code>が最も低かった手法に対して小さな値が割り当てられる。今回の例ではLDAがirisとPimaIndiansDiabetesに対して最良の結果を示したが、他のタスクではランダムフォレストが優れていた事がわかる。</p>
<p><code>plotBMRRanksAsBarChart</code>関数を使うと順位を可視化することができる。<code>pos = &quot;tile&quot;</code>を指定すると、順位・学習器・タスクの関係がヒートマップで図示される。この場合、x軸が順位、y軸がタスク、学習器の種類が色にそれぞれ割り当てられる。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plotBMRRanksAsBarChart</span>(bmr, <span class="dt">pos =</span> <span class="st">&quot;tile&quot;</span>)</code></pre></div>
<p><img src="mlr_tutorial_ja_files/figure-html/unnamed-chunk-31-1.png" width="672" /></p>
<p>なお、<code>plotBMRSummary</code>でもオプションに<code>trafo = &quot;rank&quot;</code>を指定することで、性能指標が順位に変換されるため、同様の情報を含むプロットを作成できる。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plotBMRSummary</span>(bmr, <span class="dt">trafo =</span> <span class="st">&quot;rank&quot;</span>)</code></pre></div>
<p><img src="mlr_tutorial_ja_files/figure-html/unnamed-chunk-32-1.png" width="672" /></p>
<p><code>plotBMRRanksAsBarChart</code>はデフォルトでは積み上げ棒グラフを、<code>pos = &quot;dodge&quot;</code>オプションを指定すると通常の棒グラフを描画する。これは各種法が獲得した順位の頻度を確認する場合に適している。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plotBMRRanksAsBarChart</span>(bmr)</code></pre></div>
<p><img src="mlr_tutorial_ja_files/figure-html/unnamed-chunk-33-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plotBMRRanksAsBarChart</span>(bmr, <span class="dt">pos =</span> <span class="st">&quot;dodge&quot;</span>)</code></pre></div>
<p><img src="mlr_tutorial_ja_files/figure-html/unnamed-chunk-33-2.png" width="672" /></p>
</div>
<div id="section-10.4.5" class="section level3">
<h3><span class="header-section-number">10.4.5</span> 仮説検定で学習器を比較する</h3>
<p>多くの研究者はアルゴリズムの有意性を仮説検定によって示す必要性を感じていることだろう。ベンチマーク試験の結果の比較などに適していると思われるノンパラメトリック検定として、<code>mlr</code>はOverall Friedman testとFriedman-Nemenyi post hoc testをサポートしている。</p>
<p>Friedman testは<code>stats</code>パッケージの<code>friedman.test</code>関数に基いており、これは学習器間に差があるかどうかを検定する。一方、Friedman-Nemenyi testは全ての学習器間の組合せについて差があるかどうかを検定する。ノンパラメトリック検定はパラメトリック検定と違い、データの分布に関する仮定を持たなくて済むという利点がある。しかしこれは、妥当な有意水準の元で優位な差を示すためには多くのデータセットが必要であるということでもある。</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="section-9.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
